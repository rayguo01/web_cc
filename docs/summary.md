# Web Claude Code é¡¹ç›®æ¦‚è¦

## ç‰ˆæœ¬: v2.9.20

## å®Œæˆçš„å·¥ä½œ

### 3.40 ä¿®å¤è¯­æ°”æ¨¡ä»¿å™¨ user_id ä¿å­˜é—®é¢˜ (v2.9.20)

**é—®é¢˜**ï¼šè¯­æ°”åˆ†æå®Œæˆåä¿å­˜åˆ°æ•°æ®åº“ï¼Œä½†"å·²ä¿å­˜çš„è¯­æ°”"åˆ—è¡¨ä¸­çœ‹ä¸åˆ°ã€‚

**åŸå› **ï¼šJWT token ä¸­çš„ç”¨æˆ· ID å­—æ®µæ˜¯ `userId`ï¼Œä½† `tools.js` ä¸­ä½¿ç”¨äº† `req.user.id`ï¼Œå¯¼è‡´ `user_id` ä¿å­˜ä¸º NULLã€‚

**ä¿®å¤**ï¼šå°† `src/routes/tools.js` ä¸­æ‰€æœ‰ `req.user.id` æ”¹ä¸º `req.user.userId`ã€‚

---

### 3.39 è¯­æ°”æ¨¡ä»¿å™¨æ”¹ç”¨ advanced_search ç«¯ç‚¹ (v2.9.19)

**é—®é¢˜**ï¼š`last_tweets` API ç«¯ç‚¹åªè¿”å›çº¦ 10 æ¡æ¨æ–‡ï¼Œå¯¹äºå‘æ¨é‡å¤§çš„ç”¨æˆ·æ— æ³•è·å–è¶³å¤Ÿå¤šçš„ä¼˜è´¨æ¨æ–‡è¿›è¡Œé£æ ¼åˆ†æã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šæ”¹ç”¨ `advanced_search` ç«¯ç‚¹é…åˆ `from:username` æŸ¥è¯¢ï¼Œæ”¯æŒåˆ†é¡µè·å–æ›´å¤šæ¨æ–‡ã€‚

**ä¿®æ”¹**ï¼š

1. **`.claude/voice-mimicker/voice-mimicker.ts`**ï¼š
   - å°† `fetchUserTweets` å‡½æ•°ä» `user/last_tweets` ç«¯ç‚¹æ”¹ä¸º `tweet/advanced_search` ç«¯ç‚¹
   - ä½¿ç”¨ `from:username -is:retweet` æŸ¥è¯¢ï¼Œç›´æ¥åœ¨æŸ¥è¯¢ä¸­æ’é™¤è½¬å‘
   - ä½¿ç”¨ `Top` æ’åºè·å–é«˜äº’åŠ¨æ¨æ–‡
   - æé«˜æœ€å¤§ç¿»é¡µæ¬¡æ•°ä» 5 é¡µåˆ° 10 é¡µ

**æ•ˆæœ**ï¼šå¯¹äºå‘æ¨é‡å¤§çš„ç”¨æˆ·ï¼ˆå¦‚ @thankUcrypto æœ‰ 6500+ æ¨æ–‡ï¼‰ï¼Œå¯ä»¥è·å–æ›´å¤šæ¨æ–‡ç”¨äºé£æ ¼åˆ†æã€‚

---

### 3.38 domain-trends ä¸¤é˜¶æ®µæ‰§è¡Œ (v2.9.18)

**é—®é¢˜**ï¼šdomain-trends åˆ†æå¤±è´¥åé‡è¯•æ—¶ï¼Œä¼šé‡å¤æŠ“å–åŸå§‹æ•°æ®ï¼Œæµªè´¹ API è°ƒç”¨ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šä¸º domain-trends å®ç°ä¸ x-trends/tophub-trends ç›¸åŒçš„ä¸¤é˜¶æ®µæ‰§è¡Œæ¨¡å¼ã€‚

**ä¿®æ”¹**ï¼š

1. **`.claude/domain-trends/domain-trends.ts`**ï¼š
   - æ–°å¢ `fetchOnly()` å‡½æ•° - ä»…æŠ“å–æ•°æ®ï¼Œè¾“å‡º `__FETCH_RESULT__` æ ‡è®°
   - æ–°å¢ `analyzeOnly()` å‡½æ•° - ä½¿ç”¨å·²æœ‰æ•°æ®è¿›è¡Œåˆ†æ
   - æ–°å¢ CLI æ¨¡å¼ï¼š`fetch` å’Œ `analyze-file`

2. **`src/services/scheduler.js`**ï¼š
   - æ–°å¢ `fetchDomainTrendsData()` - è°ƒç”¨ domain-trends fetch æ¨¡å¼
   - æ–°å¢ `analyzeDomainTrendsData()` - è°ƒç”¨ domain-trends analyze-file æ¨¡å¼
   - æ–°å¢ `executeTwoPhaseDomainTrends()` - ä¸¤é˜¶æ®µæ‰§è¡Œé€»è¾‘
   - æ–°å¢ `executeTwoPhaseDomainTrendsWithRetry()` - å¸¦é‡è¯•çš„ä¸¤é˜¶æ®µæ‰§è¡Œ
   - ä¿®æ”¹ `fetchAllTrends()` - domain-trends ä½¿ç”¨ä¸¤é˜¶æ®µæ‰§è¡Œ

**æ‰§è¡Œæµç¨‹**ï¼š
```
1. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦æœ‰ completed çš„åˆ†æç»“æœ â†’ ç›´æ¥è¿”å›
2. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦æœ‰åŸå§‹æ•°æ® â†’ è·³è¿‡æŠ“å–
3. æŠ“å–åŸå§‹æ•°æ® â†’ ä¿å­˜åˆ°æ•°æ®åº“
4. æ£€æŸ¥ analyzing çŠ¶æ€ â†’ ç­‰å¾…å…¶ä»–è¿›ç¨‹å®Œæˆ
5. æ‰§è¡Œåˆ†æ â†’ ä¿å­˜ç»“æœåˆ°æ•°æ®åº“
```

**æ•ˆæœ**ï¼šåˆ†æå¤±è´¥é‡è¯•æ—¶ï¼Œç›´æ¥ä½¿ç”¨å·²ä¿å­˜çš„åŸå§‹æ•°æ®ï¼Œä¸å†é‡å¤æŠ“å–ã€‚

---

### 3.37 è¯­æ°”æ¨¡ä»¿å™¨å·¥å…· (v2.9.17)

**åŠŸèƒ½**ï¼šæ–°å¢"è¯­æ°”æ¨¡ä»¿å™¨"å·¥å…·ï¼Œåˆ†æç‰¹å®šæ¨ä¸»çš„å†™ä½œé£æ ¼ï¼Œç”Ÿæˆå¯ç”¨äºæ¨¡ä»¿å…¶è¯­æ°”çš„ Promptã€‚

**å®ç°**ï¼š

1. **åç«¯ API**ï¼ˆ`src/routes/tools.js`ï¼‰ï¼š
   - `GET /api/tools/voice-prompts` - è·å–ç”¨æˆ·ä¿å­˜çš„æ‰€æœ‰è¯­æ°” Prompt
   - `GET /api/tools/voice-prompts/:id` - è·å–å•ä¸ª Prompt è¯¦æƒ…
   - `DELETE /api/tools/voice-prompts/:id` - åˆ é™¤ Prompt
   - `POST /api/tools/voice-prompts/analyze` - æ‰§è¡Œé£æ ¼åˆ†æï¼ˆSSE æµå¼å“åº”ï¼‰

2. **æ•°æ®åº“æœåŠ¡**ï¼ˆ`src/services/voicePromptDb.js`ï¼‰ï¼š
   - `save()` - ä¿å­˜ç”Ÿæˆçš„ Prompt
   - `getByUserId()` - è·å–ç”¨æˆ·çš„æ‰€æœ‰ Prompt
   - `getById()` - è·å–å•ä¸ª Prompt
   - `delete()` - åˆ é™¤ Prompt

3. **æ•°æ®åº“è¡¨**ï¼ˆ`src/config/database.js`ï¼‰ï¼š
   ```sql
   CREATE TABLE IF NOT EXISTS voice_prompts (
       id SERIAL PRIMARY KEY,
       user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
       username VARCHAR(100) NOT NULL,
       display_name VARCHAR(200),
       avatar_url VARCHAR(500),
       tweet_count INTEGER DEFAULT 0,
       total_chars INTEGER DEFAULT 0,
       prompt_content TEXT NOT NULL,
       sample_tweets JSONB,
       created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
   )
   ```

4. **æŠ€èƒ½è„šæœ¬**ï¼ˆ`.claude/voice-mimicker/voice-mimicker.ts`ï¼‰ï¼š
   - æŠ“å–ç”¨æˆ·æ¨æ–‡ï¼ˆ>150å­—ï¼Œæ’é™¤è½¬å‘ï¼‰
   - è°ƒç”¨ Claude CLI åˆ†æå†™ä½œé£æ ¼
   - ç”Ÿæˆ Style Persona ç³»ç»Ÿ Prompt

5. **å‰ç«¯é¡µé¢**ï¼š
   - é¦–é¡µ"æˆ‘çš„å·¥å…·"åŒºåŸŸï¼ˆ`public/js/generator/pages/home.js`ï¼‰
   - è¯­æ°”æ¨¡ä»¿å™¨é¡µé¢ï¼ˆ`public/js/generator/pages/voice-mimicker.js`ï¼‰
   - CSS æ ·å¼ï¼ˆ`public/css/generator.css`ï¼‰

**UI äº¤äº’**ï¼š
- é¦–é¡µæµç¨‹å›¾ä¸‹æ–¹æ˜¾ç¤º"æˆ‘çš„å·¥å…·"åŒºåŸŸ
- ç‚¹å‡»"è¯­æ°”æ¨¡ä»¿å™¨"è¿›å…¥å·¥å…·é¡µé¢
- è¾“å…¥ Twitter ç”¨æˆ·åï¼Œç‚¹å‡»åˆ†æ
- SSE å®æ—¶æ˜¾ç¤ºåˆ†æè¿›åº¦
- åˆ†æå®Œæˆåæ˜¾ç¤ºåœ¨"å·²ä¿å­˜çš„è¯­æ°”"åˆ—è¡¨
- ç‚¹å‡»å¤´åƒå¼¹çª—æŸ¥çœ‹å®Œæ•´ Promptï¼Œæ”¯æŒå¤åˆ¶å’Œåˆ é™¤

**å¤´åƒæœåŠ¡**ï¼šä½¿ç”¨ unavatar.io ä»£ç†æœåŠ¡è·å– Twitter ç”¨æˆ·å¤´åƒã€‚

---

### 3.36 domain-trends æŸ¥çœ‹åŸå¸–æŒ‡å‘å…·ä½“æ¨æ–‡ (v2.9.16)

**åŠŸèƒ½**ï¼š"æŸ¥çœ‹åŸå¸–" é“¾æ¥ç°åœ¨æŒ‡å‘å…·ä½“æ¨æ–‡ URLï¼Œè€Œä¸æ˜¯ KOL ä¸»é¡µæˆ–æœç´¢é“¾æ¥ã€‚

**ä¿®æ”¹**ï¼š

1. **`domain-trends.ts`**ï¼š
   - prompt ä¸­æ·»åŠ "æ¨æ–‡é“¾æ¥"å­—æ®µï¼ˆ`tweet.url`ï¼‰
   - JSON schema æ·»åŠ  `tweetUrl` å­—æ®µ
   - æ³¨æ„äº‹é¡¹å¼ºè°ƒå¿…é¡»ä½¿ç”¨å…·ä½“æ¨æ–‡é“¾æ¥

2. **`trends.js`**ï¼š
   - `parseTopicsFromJSON()` ä¼˜å…ˆä½¿ç”¨ `tweetUrl` å­—æ®µ

---

### 3.35 ä¿®å¤ domain-trends ç¼“å­˜æŸ¥è¯¢å’Œæ—¶é—´è½´ (v2.9.15)

**é—®é¢˜**ï¼šXé¢†åŸŸè¶‹åŠ¿é¡µé¢æ˜¾ç¤º 8 å°æ—¶æ—¶é—´è½´ï¼Œå·²æŠ“å–å†…å®¹ä¸æ˜¾ç¤ºã€‚

**æ ¹æœ¬åŸå› **ï¼š
- è°ƒåº¦å™¨å­˜å‚¨æ•°æ®ç”¨ `domain-trends:ai:group0` æ ¼å¼
- å‰ç«¯æŸ¥è¯¢ç”¨ `domain-trends:ai` æ ¼å¼
- `skillCache` çš„åˆ¤æ–­é€»è¾‘ç”¨ `skillId.includes(':group')` å¯¼è‡´ä¸åŒ¹é…

**ä¿®å¤**ï¼ˆ`src/services/skillCache.js`ï¼‰ï¼š

1. **æ–°å¢ `isDomainTrends()` æ–¹æ³•**ï¼šç»Ÿä¸€åˆ¤æ–­æ˜¯å¦ä¸º domain-trends ç±»å‹
2. **æ–°å¢ `getAggregatedRotationData()` æ–¹æ³•**ï¼šèšåˆæ‰€æœ‰è½®æ¢ç»„çš„ç¼“å­˜æ•°æ®
3. **æ›´æ–° `getAvailableHours()`**ï¼šdomain-trends ç»Ÿä¸€ä½¿ç”¨ 2 å°æ—¶æ—¶é—´è½´
4. **æ›´æ–° `get()` / `getByHour()`**ï¼šæ”¯æŒä»èšåˆæ•°æ®ä¸­æŸ¥è¯¢
5. **æ›´æ–° `cleanupOldData()` / `set()`**ï¼šç»Ÿä¸€ä½¿ç”¨ `isDomainTrends()` åˆ¤æ–­

**æ•°æ®æŸ¥è¯¢æµç¨‹**ï¼š
```
å‰ç«¯è¯·æ±‚ domain-trends:ai/hours
    â†“
getAvailableHours('domain-trends:ai')
    â†“
isDomainTrends() = true, ä¸å« :group
    â†“
getAggregatedRotationData('domain-trends:ai')
    â†“
èšåˆ domain-trends:ai:group0~9 çš„æ‰€æœ‰ç¼“å­˜
    â†“
è¿”å› 2 å°æ—¶é—´éš”æ—¶é—´è½´
```

---

### 3.34 å‰ç«¯æ¸…ç†å’Œé¢„è®¾æ˜¾ç¤ºä¿®å¤ (v2.9.14)

**åŠŸèƒ½æ¦‚è¿°**ï¼šæ¸…ç†å‰ç«¯å‰©ä½™çš„ 8 å°æ—¶æ–‡æ¡ˆï¼Œä¿®å¤é¢†åŸŸé¢„è®¾åˆ—è¡¨é‡å¤æ˜¾ç¤ºé—®é¢˜ã€‚

**ä¿®å¤çš„é—®é¢˜**ï¼š

1. **å‰ç«¯æ–‡æ¡ˆä¿®å¤** (`public/js/generator/pages/trends.js`)ï¼š
   - `showWaitingMessage()` ä¸­çš„"æ¯8å°æ—¶"æ”¹ä¸º"æ¯2å°æ—¶è½®æ¢"

2. **é¢„è®¾åˆ—è¡¨é‡å¤** (`src/routes/skills.js`)ï¼š
   - é—®é¢˜ï¼šé¢†åŸŸé€‰æ‹©æ˜¾ç¤º"AIè¶‹åŠ¿"å’Œ"AIè¶‹åŠ¿ï¼ˆ100kolè½®æ¢ï¼‰"ä¸¤ä¸ªæ ‡ç­¾
   - åŸå› ï¼šAPI è¯»å–äº† `ai.json` å’Œ `ai-kol-groups.json` ä¸¤ä¸ªæ–‡ä»¶
   - ä¿®å¤ï¼šè¿‡æ»¤æ‰ `-kol-groups.json` å’Œ `-kols.json` é…ç½®æ–‡ä»¶

---

### 3.33 ç§»é™¤ 8 å°æ—¶ä¼ ç»Ÿæ¨¡å¼ä»£ç  (v2.9.13)

**åŠŸèƒ½æ¦‚è¿°**ï¼šç§»é™¤æ‰€æœ‰ domain-trends 8 å°æ—¶ä¼ ç»Ÿæ¨¡å¼ç›¸å…³ä»£ç ï¼Œç³»ç»Ÿç°åœ¨åªæ”¯æŒ 2 å°æ—¶è½®æ¢æ¨¡å¼ã€‚

**åˆ é™¤çš„ä»£ç **ï¼š

| æ–‡ä»¶ | åˆ é™¤å†…å®¹ |
|------|----------|
| `src/services/scheduler.js` | `isDomainCacheValid()`ã€`isDomainTrendsFetchHour()` å‡½æ•°ã€ä¼ ç»Ÿæ¨¡å¼åˆ†æ”¯ã€8å°æ—¶å¯åŠ¨æ—¥å¿— |
| `src/services/skillCache.js` | `getDomainTrendsHours()` å‡½æ•°ã€`get()`/`set()`/`cleanupOldData()`/`getAvailableHours()` ä¸­çš„ä¼ ç»Ÿæ¨¡å¼åˆ†æ”¯ |
| `src/services/trendsDb.js` | `get8HourWindowKey()` å‡½æ•° |

**ç®€åŒ–çš„é€»è¾‘**ï¼š

- è°ƒåº¦å™¨åªæ£€æŸ¥è½®æ¢æ¨¡å¼é…ç½®
- ç¼“å­˜åªå­˜å‚¨/è¯»å– 2 å°æ—¶çª—å£æ•°æ®
- æ—¶é—´è½´åªæ˜¾ç¤º 2 å°æ—¶é—´éš”ç‚¹

---

### 3.32 ä¿®å¤è½®æ¢æ¨¡å¼ç¼“å­˜æŒä¹…åŒ–å’Œæ¢å¤ (v2.9.12)

**é—®é¢˜**ï¼šæœåŠ¡å™¨é‡å¯åä»ç„¶é‡å¤æŠ“å– domain-trendsï¼ŒåŸå› æœ‰ä¸¤ä¸ªï¼š

1. **`loadFromDisk()`**ï¼šåªåŠ è½½ `domain-trends:web3`ï¼Œä¸åŠ è½½è½®æ¢æ¨¡å¼çš„ `domain-trends:web3:group0`
2. **`cleanupOldData()`**ï¼šåªä¿ç•™ 00, 08, 16 æ—¶é—´ç‚¹ï¼Œä¼šåˆ é™¤è½®æ¢æ¨¡å¼çš„ 02, 04, 06 ç­‰æ•°æ®

**ä¿®å¤**ï¼š

1. **`loadFromDisk()`**ï¼šæ”¹ä¸ºæ‰«æç¼“å­˜ç›®å½•æ‰€æœ‰ `.hourly.json` æ–‡ä»¶ï¼Œè‡ªåŠ¨æ¢å¤æ‰€æœ‰ç¼“å­˜
2. **`cleanupOldData()`**ï¼šè½®æ¢æ¨¡å¼ä¿ç•™æ‰€æœ‰ 2 å°æ—¶çª—å£ç‚¹ï¼ˆ00, 02, 04, ...ï¼‰

---

### 3.31 ä¿®å¤è½®æ¢æ¨¡å¼ç¼“å­˜è¯»å–çª—å£ä¸åŒ¹é… (v2.9.11)

**é—®é¢˜**ï¼š`skillCache.get()` ä½¿ç”¨å½“å‰å°æ—¶ä½œä¸º hourKeyï¼Œä½†è½®æ¢æ¨¡å¼æ•°æ®å­˜å‚¨åœ¨ 2 å°æ—¶çª—å£èµ·ç‚¹ã€‚

**ä¿®å¤**ï¼š`get()` æ ¹æ® skillId ç±»å‹ä½¿ç”¨æ­£ç¡®çš„æ—¶é—´çª—å£ã€‚

---

### 3.30 domain-trends è½®æ¢æ¨¡å¼æ—¶é—´è½´æ˜¾ç¤ºä¿®å¤ (v2.9.10)

**é—®é¢˜**ï¼šdomain-trends è½®æ¢æ¨¡å¼æ¯ 2 å°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œä½†æ—¶é—´è½´æ˜¾ç¤ºä»ç„¶æ˜¯ 8 å°æ—¶é—´éš”ï¼ˆ0:00, 8:00, 16:00ï¼‰ã€‚

**ä¿®æ”¹**ï¼šæ›´æ–° `skillCache.js` æ”¯æŒ 2 å°æ—¶é—´éš”ï¼š

1. **`getAvailableHours()`**ï¼šæ£€æµ‹è½®æ¢æ¨¡å¼ç¼“å­˜ keyï¼ˆåŒ…å« `:group`ï¼‰ï¼Œä½¿ç”¨ 2 å°æ—¶é—´éš”
2. **`getDomainTrendsRotationHours()`**ï¼šæ–°å¢å‡½æ•°ï¼Œè¿”å›è¿‡å» 12 ä¸ª 2 å°æ—¶æ—¶é—´ç‚¹
3. **`set()`**ï¼šè½®æ¢æ¨¡å¼å­˜å‚¨åˆ° 2 å°æ—¶çª—å£èµ·ç‚¹ï¼ˆ00, 02, 04...ï¼‰

**æ—¶é—´è½´æ˜¾ç¤ºå¯¹æ¯”**ï¼š

| æ¨¡å¼ | æ—¶é—´ç‚¹ |
|------|--------|
| è½®æ¢æ¨¡å¼ | 0:00, 2:00, 4:00, 6:00, 8:00, 10:00, 12:00, 14:00, 16:00, 18:00, 20:00, 22:00 |
| ä¼ ç»Ÿæ¨¡å¼ | 0:00, 8:00, 16:00 |

---

### 3.29 ä¿®å¤ domain-trends é¢„è®¾æ£€æµ‹ (v2.9.9)

**é—®é¢˜**ï¼š`getDomainPresets()` è¿‡æ»¤æ‰äº†æ‰€æœ‰ `-kol-groups.json` æ–‡ä»¶ï¼Œä½†ç¼ºå°‘ä¸»é¢„è®¾æ–‡ä»¶ï¼ˆ`web3.json`ã€`ai.json`ï¼‰ï¼Œå¯¼è‡´è¿”å›ç©ºæ•°ç»„ï¼Œdomain-trends ä»ä¸æ‰§è¡Œã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šåˆ›å»ºä¸»é¢„è®¾é…ç½®æ–‡ä»¶ã€‚

**æ–°å¢æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.claude/domain-trends/presets/web3.json` | Web3 é¢„è®¾é…ç½® |
| `.claude/domain-trends/presets/ai.json` | AI é¢„è®¾é…ç½® |

---

### 3.28 ä¿®å¤åˆ†æé˜¶æ®µ JSON ä¼ å‚é—®é¢˜ (v2.9.8)

**é—®é¢˜**ï¼šè°ƒåº¦å™¨é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ JSON æ•°æ®ç»™åˆ†æè„šæœ¬ï¼Œä½†ä½¿ç”¨ `shell: true` æ—¶ Shell ä¼šè§£é‡Šç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ `#`ã€`&`ï¼‰ï¼Œå¯¼è‡´ JSON è¢«ç ´åï¼Œè§£æå¤±è´¥ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šæ”¹ç”¨ä¸´æ—¶æ–‡ä»¶ä¼ é€’æ•°æ®ï¼Œæ–°å¢ `analyze-file` æ¨¡å¼ã€‚

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `src/services/scheduler.js` | `analyzeSkillData()` æ”¹ç”¨ `analyze-file` æ¨¡å¼ä¼ é€’ä¸´æ—¶æ–‡ä»¶è·¯å¾„ |
| `.claude/x-trends/x-trends.ts` | æ–°å¢ `analyze-file` æ¨¡å¼ä»æ–‡ä»¶è¯»å– JSON |
| `.claude/tophub-trends/tophub.ts` | æ–°å¢ `analyze-file` æ¨¡å¼ä»æ–‡ä»¶è¯»å– JSON |

**å‘½ä»¤è¡Œç”¨æ³•æ›´æ–°**ï¼š

```bash
# æ—§æ–¹å¼ï¼ˆæœ‰ shell è½¬ä¹‰é—®é¢˜ï¼‰
npx ts-node x-trends.ts analyze '{"data": "..."}'

# æ–°æ–¹å¼ï¼ˆæ¨èï¼‰
npx ts-node x-trends.ts analyze-file /path/to/data.json
```

---

### 3.27 é¦–é¡µæ·»åŠ  Xé¢†åŸŸè¶‹åŠ¿å…¥å£ (v2.9.7)

**åŠŸèƒ½æ¦‚è¿°**ï¼šåœ¨é¦–é¡µ"å¼€å§‹åˆ›ä½œ"é¡µé¢æ·»åŠ  Xé¢†åŸŸè¶‹åŠ¿æ•°æ®æºå…¥å£ï¼Œä¸è¶‹åŠ¿é¡µé¢ Tab ä¿æŒä¸€è‡´ã€‚

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `public/js/generator/pages/home.js` | æ·»åŠ "Xé¢†åŸŸè¶‹åŠ¿"æ•°æ®æºå¡ç‰‡ |
| `public/js/generator/pages/trends.js` | Tab åç§°æ›´æ–°ä¸º"Xé¢†åŸŸè¶‹åŠ¿" |

**UI å˜æ›´**ï¼š

- é¦–é¡µæ–°å¢ç¬¬ä¸‰ä¸ªæ•°æ®æºé€‰é¡¹å¡ç‰‡ï¼š"Xé¢†åŸŸè¶‹åŠ¿"
- è¶‹åŠ¿é¡µé¢ Tab æ ‡ç­¾ä»"é¢†åŸŸè¶‹åŠ¿"æ›´æ–°ä¸º"Xé¢†åŸŸè¶‹åŠ¿"
- ç”¨æˆ·ç°åœ¨å¯ä»¥ä»é¦–é¡µç›´æ¥é€‰æ‹©è¿›å…¥ç‰¹å®šé¢†åŸŸï¼ˆWeb3ã€AI ç­‰ï¼‰çš„ X çƒ­ç‚¹è¿½è¸ª

---

### 3.26 è¶‹åŠ¿æ•°æ®æ•°æ®åº“å­˜å‚¨ + åˆ†æå»é‡ (v2.9.6)

**åŠŸèƒ½æ¦‚è¿°**ï¼šå°†çƒ­é—¨è¶‹åŠ¿çš„åŸå§‹æ•°æ®å’Œåˆ†æç»“æœä¿å­˜åˆ°æ•°æ®åº“ï¼Œé¿å…åŒä¸€æ—¶é—´å‘¨æœŸå†…é‡å¤è°ƒç”¨ Claude CLI åˆ†æã€‚

**æ ¸å¿ƒæ”¹è¿›**ï¼š

1. **ä¸¤é˜¶æ®µæ‰§è¡Œ**ï¼š
   - æŠ“å–é˜¶æ®µï¼šä»…è·å–åŸå§‹è¶‹åŠ¿æ•°æ®ï¼ˆä¸è°ƒç”¨ Claudeï¼‰
   - åˆ†æé˜¶æ®µï¼šæ£€æŸ¥æ•°æ®åº“ï¼Œå¦‚å·²æœ‰ç»“æœåˆ™è·³è¿‡åˆ†æ

2. **æ•°æ®åº“å­˜å‚¨**ï¼š
   - æ–°å¢ `trends_data` è¡¨å­˜å‚¨åŸå§‹æ•°æ®å’Œåˆ†æç»“æœ
   - æ”¯æŒæŒ‰ hourKey æŸ¥è¯¢å†å²æ•°æ®
   - è‡ªåŠ¨æ¸…ç† 24 å°æ—¶å‰çš„è¿‡æœŸæ•°æ®

3. **åˆ†æå»é‡**ï¼š
   - åŒä¸€å°æ—¶å†…å¤šæ¬¡è§¦å‘åªæ‰§è¡Œä¸€æ¬¡ Claude åˆ†æ
   - æ”¯æŒå¹¶å‘ä¿æŠ¤ï¼Œé˜²æ­¢é‡å¤åˆ†æ

**æ–°å¢æ•°æ®åº“è¡¨**ï¼š

```sql
CREATE TABLE trends_data (
    id SERIAL PRIMARY KEY,
    skill_id VARCHAR(100) NOT NULL,      -- 'x-trends', 'tophub-trends'
    hour_key VARCHAR(20) NOT NULL,        -- '2026-01-14-16'
    raw_data JSONB,                       -- åŸå§‹è¶‹åŠ¿æ•°æ®
    analysis_result JSONB,                -- Claude åˆ†æç»“æœ
    analysis_status VARCHAR(20),          -- 'pending', 'analyzing', 'completed', 'failed'
    error_message TEXT,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    UNIQUE(skill_id, hour_key)
);
```

**æ–°å¢æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `src/services/trendsDb.js` | è¶‹åŠ¿æ•°æ®æ•°æ®åº“æœåŠ¡ |

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `src/config/database.js` | æ·»åŠ  `trends_data` è¡¨åˆå§‹åŒ– |
| `src/services/scheduler.js` | æ·»åŠ ä¸¤é˜¶æ®µæ‰§è¡Œæ–¹æ³•ï¼Œé›†æˆ trendsDb æœåŠ¡ |
| `.claude/x-trends/x-trends.ts` | æ·»åŠ  `fetchOnly()` å’Œ `analyzeOnly()` å‡½æ•°ï¼Œæ”¯æŒ fetch/analyze å‘½ä»¤è¡Œå‚æ•° |
| `.claude/tophub-trends/tophub.ts` | æ·»åŠ  `fetchOnly()` å’Œ `analyzeOnly()` å‡½æ•°ï¼Œæ”¯æŒ fetch/analyze å‘½ä»¤è¡Œå‚æ•° |

**æ‰§è¡Œæµç¨‹**ï¼š

```
è°ƒåº¦å™¨è§¦å‘
    â†“
æ£€æŸ¥æ•°æ®åº“ (trendsDb.getByHourKey)
    â†“
å·²æœ‰åˆ†æç»“æœ? â†’ è·³è¿‡æŠ“å–å’Œåˆ†æï¼Œç›´æ¥è¿”å›
    â†“ å¦
å·²æœ‰åŸå§‹æ•°æ®? â†’ è·³è¿‡æŠ“å–ï¼Œç›´æ¥åˆ†æ
    â†“ å¦
æ‰§è¡Œ fetchOnly() â†’ ä¿å­˜åŸå§‹æ•°æ®åˆ°æ•°æ®åº“
    â†“
å†æ¬¡æ£€æŸ¥åˆ†æçŠ¶æ€ï¼ˆé˜²å¹¶å‘ï¼‰
    â†“
æ‰§è¡Œ analyzeOnly() â†’ ä¿å­˜åˆ†æç»“æœåˆ°æ•°æ®åº“
    â†“
æ›´æ–° skillCache
```

**å‘½ä»¤è¡Œç”¨æ³•**ï¼š

```bash
# å®Œæ•´æµç¨‹
npx ts-node x-trends.ts

# ä»…æŠ“å–
npx ts-node x-trends.ts fetch

# ä»…åˆ†æï¼ˆéœ€è¦JSONæ•°æ®ï¼‰
npx ts-node x-trends.ts analyze '[{"rank":1,"name":"è¯é¢˜1",...}]'
```

---

### 3.25 Web3 è½®æ¢æ¨¡å¼ + AI KOL ä¼˜åŒ– (v2.9.5)

**åŠŸèƒ½æ¦‚è¿°**ï¼šå°† Web3 é¢†åŸŸä¹Ÿè½¬æ¢ä¸º KOL åˆ†ç»„è½®æ¢æŠ“å–æ¨¡å¼ï¼ŒåŒæ—¶ä¼˜åŒ– AI KOL åˆ—è¡¨ã€‚

**Web3 è½®æ¢é…ç½®**ï¼š
- æ–°å¢ `.claude/domain-trends/presets/web3-kol-groups.json`
- 100 ä¸ª Web3 KOL åˆ†æˆ 10 ç»„
- æ¯ç»„ 10 äººï¼ŒåŒ…å«ä¸åŒé¢†åŸŸï¼ˆåˆ›å§‹äººã€äº¤æ˜“å‘˜ã€NFTã€DeFi ç­‰ï¼‰
- æ¯ 2 å°æ—¶è½®æ¢ä¸€ç»„ï¼Œ20 å°æ—¶è¦†ç›–å…¨éƒ¨ 100 äºº

**AI KOL åˆ—è¡¨ä¼˜åŒ–**ï¼š
- ç§»é™¤ Elon Muskï¼ˆå‘å¸–å†…å®¹ä¸ AI é¢†åŸŸç›¸å…³åº¦è¾ƒä½ï¼‰
- è°ƒæ•´æ’åï¼Œå°† Dario Amodei å‡è‡³ Tier 1
- ä¿®æ­£éƒ¨åˆ† Twitter handleï¼ˆå¦‚ gdb, davidsholz, clem_delangue ç­‰ï¼‰
- æ›´æ–° `docs/ai-kols-100.md`

**æ–°å¢æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.claude/domain-trends/presets/web3-kol-groups.json` | Web3 é¢†åŸŸ 100 KOL åˆ†ç»„é…ç½® |

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `docs/ai-kols-100.md` | ç§»é™¤ Elon Muskï¼Œè°ƒæ•´æ’åå’Œ handle |

---

### 3.24 KOL åˆ†ç»„è½®æ¢æŠ“å–æ¨¡å¼ (v2.9.4)

**åŠŸèƒ½æ¦‚è¿°**ï¼šæ”¯æŒå°† 100 ä¸ª KOL åˆ†æˆ 10 ç»„ï¼Œæ¯ 2 å°æ—¶è½®æ¢æŠ“å–ä¸€ç»„ï¼Œ20 å°æ—¶è¦†ç›–å…¨éƒ¨ KOLã€‚æ¯ç»„åŒ…å«ä¸åŒ Tier çš„äººï¼Œç¡®ä¿æ•°æ®å¤šæ ·æ€§ã€‚

**è®¾è®¡æ–¹æ¡ˆ**ï¼š

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| åˆ†ç»„æ•°é‡ | 10 ç»„ï¼Œæ¯ç»„ 10 äºº |
| è½®æ¢é—´éš” | 2 å°æ—¶ |
| å®Œæ•´å‘¨æœŸ | 20 å°æ—¶è¦†ç›–å…¨éƒ¨ 100 äºº |
| åˆ†ç»„ç­–ç•¥ | æ¯ç»„åŒ…å«ä¸åŒ Tier çš„ KOL |

**è°ƒåº¦è§„åˆ™**ï¼š
```
0:00 â†’ ç»„0, 2:00 â†’ ç»„1, 4:00 â†’ ç»„2, ...
18:00 â†’ ç»„9, 20:00 â†’ ç»„0 (å¾ªç¯)
```

**æ–°å¢æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.claude/domain-trends/presets/ai-kol-groups.json` | AI é¢†åŸŸ 100 KOL åˆ†ç»„é…ç½® |
| `docs/ai-kols-100.md` | AI é¢†åŸŸ 100 ä½æ¨ç‰¹å¤§V åˆ—è¡¨ |

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `.claude/domain-trends/types.ts` | æ–°å¢ `KolGroup` å’Œ `GroupRotationConfig` ç±»å‹ |
| `.claude/domain-trends/domain-trends.ts` | æ–°å¢ `loadGroupConfig()`, `getCurrentGroup()`, `fetchGroupTweets()`, `runWithRotation()` å‡½æ•° |
| `src/services/scheduler.js` | æ”¯æŒè½®æ¢æ¨¡å¼è°ƒåº¦ï¼Œæ¯ 2 å°æ—¶æ£€æŸ¥å¹¶æŠ“å–å½“å‰ç»„ |

**è¿è¡Œæ¨¡å¼**ï¼š
```bash
# ä¼ ç»Ÿæ¨¡å¼ï¼ˆ10ä¸ªKOLï¼Œæ¯8å°æ—¶ï¼‰
npx ts-node domain-trends.ts standard web3

# è½®æ¢æ¨¡å¼ï¼ˆ100ä¸ªKOLåˆ†10ç»„ï¼Œæ¯2å°æ—¶è½®æ¢ï¼‰
npx ts-node domain-trends.ts rotation ai
```

**ç¼“å­˜ç­–ç•¥**ï¼š
- è½®æ¢æ¨¡å¼ç¼“å­˜ key æ ¼å¼ï¼š`domain-trends:ai:group0`, `domain-trends:ai:group1`, ...
- æ¯ç»„ç¼“å­˜ç‹¬ç«‹å­˜å‚¨ï¼Œ2 å°æ—¶çª—å£å†…æœ‰æ•ˆ

**æœˆæˆæœ¬ä¼°ç®—**ï¼ˆè½®æ¢æ¨¡å¼ï¼‰ï¼š
- æ¯ç»„ 10 äºº Ã— 5 æ¡/äºº = 50 æ¡æ¨æ–‡
- æ¯å¤© 12 æ¬¡æŠ“å– Ã— 50 æ¡ = 600 æ¡
- æ¯æœˆ 600 Ã— 30 = 18,000 æ¡
- æˆæœ¬ï¼šçº¦ **$2.7/æœˆ**

---

### 3.23 domain-trends å…³é”®è¯æœç´¢å¯é…ç½®ç¦ç”¨ (v2.9.3)

**åŠŸèƒ½æ¦‚è¿°**ï¼šæ”¯æŒé€šè¿‡é…ç½®ç¦ç”¨å…³é”®è¯æœç´¢ï¼Œåªä½¿ç”¨ KOL ç›‘æ§æ¨¡å¼ï¼Œå‡å°‘ API è°ƒç”¨æˆæœ¬ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "query": {
    "enabled": false,  // ç¦ç”¨å…³é”®è¯æœç´¢
    ...
  },
  "kols": {
    "enabled": true,
    "accounts": ["VitalikButerin", "punk6529", ...]
  }
}
```

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `.claude/domain-trends/types.ts` | query æ¥å£æ·»åŠ  `enabled?: boolean` å­—æ®µ |
| `.claude/domain-trends/domain-trends.ts` | `fetchTweets()` æ£€æŸ¥ `query.enabled` é…ç½®ï¼Œç¦ç”¨æ—¶è·³è¿‡æœç´¢ |
| `.claude/domain-trends/presets/web3.json` | è®¾ç½® `query.enabled: false`ï¼Œåªç›‘æ§ 10 ä¸ªæ ¸å¿ƒ KOL |

**æ•ˆæœ**ï¼š
- å½“ `query.enabled: false` æ—¶ï¼Œè·³è¿‡å…³é”®è¯æœç´¢ï¼ŒåªæŠ“å– KOL æ¨æ–‡
- å‡å°‘ API è°ƒç”¨æ¬¡æ•°ï¼ŒèŠ‚çœæˆæœ¬
- æ—¥å¿—æ˜¾ç¤º `â­ï¸ å…³é”®è¯æœç´¢å·²ç¦ç”¨ï¼Œè·³è¿‡`

---

### 3.22 domain-trends API ä¿®å¤å’Œèšåˆé€»è¾‘ä¼˜åŒ– (v2.9.2)

**åŠŸèƒ½æ¦‚è¿°**ï¼šä¿®å¤ domain-trends çš„ Twitter API é—®é¢˜ï¼Œä¼˜åŒ–æ¨æ–‡èšåˆé€»è¾‘ã€‚

**é—®é¢˜ä¸ä¿®å¤**ï¼š

| é—®é¢˜ | åŸå›  | ä¿®å¤ |
|------|------|------|
| API 405 Method Not Allowed | twitterapi.io ä½¿ç”¨ GET è€Œé POST | æ”¹ä¸º GET + URLSearchParams |
| API 429 Too Many Requests | å…è´¹ç”¨æˆ·é™åˆ¶ 5 ç§’/è¯·æ±‚ | å¢åŠ å»¶è¿Ÿåˆ° 5500ms |
| KOL æ¨æ–‡è¿”å› 0 æ¡ | API å“åº”ç»“æ„ä¸åŒ `data.data.tweets` | ä¿®å¤å“åº”è§£æé€»è¾‘ |
| æœç´¢æ¨æ–‡å…¨è¢«è¿‡æ»¤ | minLikes/minRetweets é—¨æ§›å¤ªé«˜ | é™ä½é—¨æ§› 100 â†’ 20 |
| èšåˆè¯é¢˜æ•°ä¸º 0 | æ¨æ–‡å¤§å¤šæ²¡æœ‰ hashtag | æ·»åŠ  fallback æŒ‰ KOL ä½œè€…èšåˆ |
| ç¼“å­˜æ–‡ä»¶åå«å†’å· | Windows ä¸æ”¯æŒå†’å· | æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ |

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `.claude/domain-trends/twitter-api-client.ts` | GET æ–¹æ³•ã€5500ms å»¶è¿Ÿã€å“åº”ç»“æ„è§£æä¿®å¤ |
| `.claude/domain-trends/domain-trends.ts` | èšåˆé€»è¾‘ï¼šhashtag â†’ KOL ä½œè€… â†’ å…¨éƒ¨æ¨æ–‡ |
| `.claude/domain-trends/presets/*.json` | minLikes: 100 â†’ 20 |
| `src/services/skillCache.js` | æ–‡ä»¶åå†’å·æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ |

**èšåˆé€»è¾‘ä¼˜å…ˆçº§**ï¼š
1. æŒ‰ hashtag èšåˆï¼ˆåŸæœ‰é€»è¾‘ï¼‰
2. å¦‚æ—  hashtagï¼ŒæŒ‰ KOL ä½œè€…èšåˆ
3. å¦‚æ—  KOL æ¨æ–‡ï¼ŒæŒ‰äº’åŠ¨é‡æ’åºä½¿ç”¨å…¨éƒ¨æ¨æ–‡

---

### 3.21 domain-trends æŠ“å–é¢‘ç‡è°ƒæ•´ (v2.9.1)

**åŠŸèƒ½æ¦‚è¿°**ï¼šå°† domain-trends çš„æŠ“å–é¢‘ç‡ä»æ¯å°æ—¶æ”¹ä¸ºæ¯8å°æ—¶ï¼Œå‡å°‘ API è°ƒç”¨æ¬¡æ•°ã€‚

**è°ƒåº¦ç­–ç•¥**ï¼š
- x-trends / tophub-trendsï¼šæ¯å°æ—¶ç¬¬1åˆ†é’ŸæŠ“å–
- domain-trendsï¼šæ¯8å°æ—¶ï¼ˆ0:01, 8:01, 16:01ï¼‰

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `src/services/scheduler.js` | æ·»åŠ  `isDomainTrendsFetchHour()` å’Œ `isDomainCacheValid()` æ–¹æ³•ï¼Œä¿®æ”¹ `fetchAllTrends()` æ¡ä»¶åˆ¤æ–­ |
| `src/services/skillCache.js` | æ·»åŠ  `getDomainTrendsHours()` æ–¹æ³•ï¼Œä¿®æ”¹ `getAvailableHours()` è¿”å›8å°æ—¶é—´éš”ï¼Œä¿®æ”¹ `cleanupOldData()` ä¿ç•™å›ºå®šæ—¶é—´ç‚¹ |
| `public/js/generator/pages/trends.js` | ä¿®æ”¹ `showWaitingMessage()` æ˜¾ç¤ºä¸åŒçš„æŠ“å–é¢‘ç‡æç¤º |

**ç¼“å­˜ç­–ç•¥**ï¼š
- domain-trends ç¼“å­˜åªä¿ç•™ 0:00, 8:00, 16:00 ä¸‰ä¸ªæ—¶é—´ç‚¹çš„æ•°æ®
- å¯åŠ¨æ—¶æ£€æŸ¥8å°æ—¶çª—å£å†…æ˜¯å¦æœ‰æœ‰æ•ˆç¼“å­˜
- å‰ç«¯æ—¶é—´è½´åªæ˜¾ç¤ºæœ€è¿‘3ä¸ª8å°æ—¶æ—¶é—´ç‚¹

---

### 3.20 ç‰¹å®šé¢†åŸŸè¶‹åŠ¿è¿½è¸ª (v2.9.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šå®ç°å¯é…ç½®çš„ç‰¹å®šé¢†åŸŸè¶‹åŠ¿è¿½è¸ªåŠŸèƒ½ï¼ˆdomain-trendsï¼‰ï¼Œæ”¯æŒè¿½è¸ª Web3ã€AIã€Gaming ç­‰å‚ç›´é¢†åŸŸçš„çƒ­ç‚¹ã€‚

**æ ¸å¿ƒç‰¹æ€§**ï¼š

1. **å¤šé¢†åŸŸé¢„è®¾**ï¼š
   - ğŸŒ Web3ï¼šåŠ å¯†è´§å¸ã€NFTã€DeFiã€åŒºå—é“¾çƒ­ç‚¹
   - ğŸ¤– AIï¼šäººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€å¤§æ¨¡å‹åŠ¨æ€
   - ğŸ® Gamingï¼šæ¸¸æˆã€ç”µç«ã€æ¸¸æˆå¼€å‘è¶‹åŠ¿

2. **æ•°æ®æº**ï¼š[twitterapi.io](https://twitterapi.io/) API
   - å…³é”®è¯æœç´¢ï¼šæŒ‰é…ç½®çš„å…³é”®è¯å’Œè¯é¢˜æ ‡ç­¾æœç´¢æ¨æ–‡
   - KOL ç›‘æ§ï¼šè¿½è¸ªé¢†åŸŸå†…å…³é”®æ„è§é¢†è¢–çš„æ¨æ–‡
   - æ™ºèƒ½è¿‡æ»¤ï¼šæœ€ä½äº’åŠ¨é‡è¿‡æ»¤ã€æ’é™¤è½¬å‘

3. **å®šæ—¶æŠ“å–**ï¼š
   - æ¯8å°æ—¶æŠ“å–ä¸€æ¬¡ï¼ˆ0:01, 8:01, 16:01ï¼‰
   - ä¸ x-trends/tophub-trends ç‹¬ç«‹è°ƒåº¦
   - ç”¨æˆ·åªè¯»ç¼“å­˜ï¼Œä¸è§¦å‘æŠ“å–
   - å‰ç«¯æ—¶é—´è½´æ˜¾ç¤ºæœ€è¿‘3ä¸ªæ—¶é—´ç‚¹

4. **å‰ç«¯é›†æˆ**ï¼š
   - çƒ­å¸–æŠ“å–é¡µæ–°å¢"ğŸ¯ é¢†åŸŸè¶‹åŠ¿"Tab
   - é¢„è®¾é€‰æ‹©å™¨ï¼šç‚¹å‡»åˆ‡æ¢ä¸åŒé¢†åŸŸ
   - å¤ç”¨ç°æœ‰æ—¶é—´è½´å’Œæ•°æ®å±•ç¤ºç»„ä»¶

**æ–°å¢æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.claude/domain-trends/domain-trends.ts` | ä¸»æ‰§è¡Œè„šæœ¬ |
| `.claude/domain-trends/twitter-api-client.ts` | twitterapi.io API å®¢æˆ·ç«¯ |
| `.claude/domain-trends/types.ts` | TypeScript ç±»å‹å®šä¹‰ |
| `.claude/domain-trends/presets/web3.json` | Web3 é¢†åŸŸé…ç½® |
| `.claude/domain-trends/presets/ai.json` | AI é¢†åŸŸé…ç½® |
| `.claude/domain-trends/presets/gaming.json` | Gaming é¢†åŸŸé…ç½® |

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `src/routes/skills.js` | æ·»åŠ  domain-trends é¢„è®¾ APIã€ç¼“å­˜ key æ”¯æŒ |
| `src/services/scheduler.js` | æ·»åŠ  domain-trends å®šæ—¶æŠ“å–ä»»åŠ¡ |
| `public/js/generator/pages/trends.js` | æ·»åŠ é¢†åŸŸè¶‹åŠ¿ Tabã€é¢„è®¾é€‰æ‹©å™¨ |
| `public/css/generator.css` | æ·»åŠ é¢„è®¾é€‰æ‹©å™¨æ ·å¼ |

**ç¯å¢ƒå˜é‡**ï¼š

```env
TWITTER_API_IO_KEY=your_api_key_here
```

**API ç«¯ç‚¹**ï¼š

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/skills/domain-trends/presets` | è·å–é¢„è®¾åˆ—è¡¨ |
| GET | `/api/skills/domain-trends:preset/hours` | è·å–å¯ç”¨å°æ—¶åˆ—è¡¨ |
| GET | `/api/skills/domain-trends:preset/cached/:hourKey` | è·å–æŒ‡å®šå°æ—¶æ•°æ® |

---

### 3.19 é€‰é¢˜é“¾æ¥åŠŸèƒ½ (v2.8.3)

**åŠŸèƒ½æ¦‚è¿°**ï¼šä¸ºæ‰€æœ‰é€‰é¢˜å»ºè®®æ·»åŠ å¯ç‚¹å‡»çš„é“¾æ¥ï¼Œæ–¹ä¾¿ç”¨æˆ·ç›´æ¥æŸ¥çœ‹åŸå¸–ã€‚

**åŠŸèƒ½ç‰¹æ€§**ï¼š

1. **X-Trends é“¾æ¥**ï¼šä½¿ç”¨ X æœç´¢ URL æ ¼å¼ï¼ˆ`https://x.com/search?q=è¯é¢˜åç§°`ï¼‰
2. **TopHub é“¾æ¥**ï¼šä½¿ç”¨åŸå§‹æ–‡ç« é“¾æ¥
3. **é“¾æ¥æ˜¾ç¤º**ï¼šåœ¨è¯é¢˜æ ‡é¢˜ä¸‹æ–¹æ˜¾ç¤º"ğŸ”— æŸ¥çœ‹åŸå¸–"æŒ‰é’®
4. **äº¤äº’ä¼˜åŒ–**ï¼šç‚¹å‡»é“¾æ¥ä¸ä¼šè§¦å‘è¯é¢˜é€‰æ‹©ï¼Œé“¾æ¥åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `.claude/x-trends/x-trends.ts` | JSON_SCHEMA æ·»åŠ  `url` å­—æ®µ |
| `.claude/tophub-trends/tophub.ts` | JSON_SCHEMA æ·»åŠ  `link` å­—æ®µ |
| `public/js/generator/pages/trends.js` | `parseTopicsFromJSON` æå–é“¾æ¥ï¼Œ`renderTopicItem` æ˜¾ç¤ºé“¾æ¥æŒ‰é’® |
| `public/css/generator.css` | æ·»åŠ  `.topic-link`, `.topic-link-btn` æ ·å¼ |

---

### 3.18 çƒ­å¸–å†å²æ•°æ®æŸ¥çœ‹åŠŸèƒ½ (v2.8.2)

**åŠŸèƒ½æ¦‚è¿°**ï¼šæ”¯æŒæŸ¥çœ‹è¿‡å»12å°æ—¶çš„çƒ­å¸–æŠ“å–å†å²æ•°æ®ï¼Œé€šè¿‡æ—¶é—´è½´å¿«é€Ÿåˆ‡æ¢ä¸åŒæ—¶é—´ç‚¹çš„æ•°æ®ã€‚

**åŠŸèƒ½ç‰¹æ€§**ï¼š

1. **12å°æ—¶å†å²æ•°æ®å­˜å‚¨**ï¼š
   - åç«¯æŒ‰å°æ—¶å­˜å‚¨çƒ­å¸–æ•°æ®
   - è‡ªåŠ¨æ¸…ç†è¶…è¿‡12å°æ—¶çš„æ—§æ•°æ®
   - æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼ŒæœåŠ¡é‡å¯åæ¢å¤

2. **æ—¶é—´è½´UI**ï¼š
   - é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºè¿‡å»12å°æ—¶çš„æ—¶é—´æŒ‰é’®
   - æœ‰æ•°æ®çš„æ—¶é—´ç‚¹å¯ç‚¹å‡»åˆ‡æ¢
   - å½“å‰å°æ—¶æ ‡è®°ä¸º"å½“å‰"
   - æ— æ•°æ®çš„æ—¶é—´ç‚¹æ˜¾ç¤ºä¸ºç°è‰²ç¦ç”¨çŠ¶æ€

3. **ç§»é™¤ç¼“å­˜æç¤º**ï¼š
   - ç§»é™¤"ğŸ“¦ æ•°æ®æ¥è‡ªç¼“å­˜ï¼ˆæ¯å°æ—¶æ›´æ–°ä¸€æ¬¡ï¼‰"æç¤º
   - ç”¨æˆ·é€šè¿‡æ—¶é—´è½´ç›´è§‚äº†è§£æ•°æ®æ—¶é—´

**æ–°å¢ API**ï¼š

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/skills/:skillId/hours` | GET | è·å–å¯ç”¨å°æ—¶åˆ—è¡¨ |
| `/api/skills/:skillId/cached/:hourKey` | GET | è·å–æŒ‡å®šå°æ—¶çš„æ•°æ® |

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `src/services/skillCache.js` | é‡æ„ä¸ºæŒ‰å°æ—¶å­˜å‚¨ï¼Œæ·»åŠ  `getByHour`, `getAvailableHours` æ–¹æ³• |
| `src/routes/skills.js` | æ–°å¢æŒ‰å°æ—¶è·å–æ•°æ®çš„ API |
| `public/js/generator/pages/trends.js` | æ·»åŠ æ—¶é—´è½´UIï¼ŒæŒ‰å°æ—¶åŠ è½½æ•°æ® |
| `public/css/generator.css` | æ·»åŠ æ—¶é—´è½´æ ·å¼ |

---

### 3.17 åˆå¹¶é«˜æ½œåŠ›è¯é¢˜åˆ†æå’Œé€‰é¢˜å»ºè®® (v2.8.1)

**åŠŸèƒ½æ¦‚è¿°**ï¼šå°† x-trends å’Œ tophub-trends çš„"é«˜æ½œåŠ›è¯é¢˜åˆ†æ"ä¸"é€‰é¢˜å»ºè®®"åˆå¹¶ä¸ºç»Ÿä¸€çš„ `suggestions` æ•°ç»„ï¼Œç®€åŒ–æ•°æ®ç»“æ„å¹¶æå‡ç”¨æˆ·ä½“éªŒã€‚

**æ”¹è¿›å†…å®¹**ï¼š

1. **ç»Ÿä¸€çš„ suggestions ç»“æ„**ï¼š
   - åˆå¹¶åŸ `highPotentialTopics` å’Œ `suggestions` ä¸ºä¸€ä¸ªæ•°ç»„
   - æ¯ä¸ªè¯é¢˜é¡¹ç°åœ¨åŒ…å«å®Œæ•´ä¿¡æ¯ï¼šè¯„åˆ†ã€åŸå› ã€é€‰é¢˜è§’åº¦ã€åˆ›ä½œæ–¹å‘

2. **æ–°çš„ JSON Schema**ï¼š
```json
{
  "suggestions": [
    {
      "rank": 1,
      "topic": "è¯é¢˜åç§°",
      "source": "æ¥æºå¹³å°ï¼ˆä»… tophubï¼‰",
      "score": "æ½œåŠ›è¯„åˆ†ï¼ˆé«˜/ä¸­/ä½ï¼‰",
      "reason": "ä¸ºä»€ä¹ˆæœ‰æ½œåŠ›",
      "angle": "é€‰é¢˜è§’åº¦/æ ‡é¢˜å»ºè®®",
      "whyEffective": "ä¸ºä»€ä¹ˆè¿™ä¸ªé€‰é¢˜è§’åº¦æœ‰æ•ˆ",
      "directions": ["åˆ›ä½œæ–¹å‘1", "åˆ›ä½œæ–¹å‘2"]
    }
  ]
}
```

3. **å‰ç«¯æ›´æ–°**ï¼š
   - ç§»é™¤ç‹¬ç«‹çš„"é«˜æ½œåŠ›è¯é¢˜åˆ†æ"åŒºå—
   - è¯é¢˜å¡ç‰‡ç›´æ¥æ˜¾ç¤ºè¯„åˆ†å¾½ç« ï¼ˆé«˜/ä¸­/ä½ï¼‰
   - å¢åŠ æ¥æºå¹³å°æ ‡ç­¾ï¼ˆä»… TopHubï¼‰
   - å¢åŠ "æ½œåŠ›åˆ†æ"å­—æ®µæ˜¾ç¤º

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `.claude/x-trends/x-trends.ts` | æ›´æ–° JSON Schema å’Œ Prompt |
| `.claude/tophub-trends/tophub.ts` | æ›´æ–° JSON Schema å’Œ Prompt |
| `public/js/generator/pages/trends.js` | æ›´æ–°è§£æé€»è¾‘å’Œæ¸²æŸ“æ¨¡æ¿ |
| `public/css/generator.css` | æ·»åŠ è¯„åˆ†å¾½ç« å’Œæ¥æºæ ‡ç­¾æ ·å¼ |

---

### 3.16 å¥å£® JSON è§£æé‡æ„ (v2.8.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šåŸºäº `engine.go` çš„æœ€ä½³å®è·µï¼Œé‡æ„æ‰€æœ‰ Skill çš„ JSON è§£æé€»è¾‘ï¼Œå¤§å¹…æé«˜ LLM è¾“å‡ºè§£æçš„ç¨³å®šæ€§ã€‚

**æ ¸å¿ƒæ”¹è¿›**ï¼š

1. **XML æ ‡ç­¾åŒ…è£¹**ï¼šè¦æ±‚ LLM ä½¿ç”¨ `<reasoning>` å’Œ `<result>` æ ‡ç­¾åˆ†éš”æ€ç»´é“¾å’Œ JSON è¾“å‡ºï¼Œé¿å…æ€ç»´é“¾ä¸­çš„æ–‡å­—å¹²æ‰° JSON è§£æã€‚

2. **å¤šå±‚å›é€€ JSON æå–**ï¼š
   - å±‚çº§1ï¼šä» `<result>` æ ‡ç­¾æå–
   - å±‚çº§2ï¼šä» `<json>` æ ‡ç­¾æå–
   - å±‚çº§3ï¼šä» `<decision>` æ ‡ç­¾æå–
   - å±‚çº§4ï¼šä» ` ```json ` ä»£ç å—æå–
   - å±‚çº§5ï¼šç›´æ¥åŒ¹é… JSON å¯¹è±¡ `{...}`
   - å±‚çº§6ï¼šç›´æ¥åŒ¹é… JSON æ•°ç»„ `[...]`

3. **å…¨è§’å­—ç¬¦è‡ªåŠ¨ä¿®å¤**ï¼šè‡ªåŠ¨å°†ä¸­æ–‡å…¨è§’å­—ç¬¦è½¬æ¢ä¸ºåŠè§’ï¼ŒåŒ…æ‹¬ï¼š
   - ä¸­æ–‡å¼•å·ï¼š`"` `"` `'` `'` â†’ `"` `'`
   - å…¨è§’æ‹¬å·ï¼š`ï¼»` `ï¼½` `ï½›` `ï½` â†’ `[` `]` `{` `}`
   - å…¨è§’æ ‡ç‚¹ï¼š`ï¼š` `ï¼Œ` `ã€` â†’ `:` `,` `,`
   - CJK æ‹¬å·ï¼š`ã€` `ã€‘` `ã€”` `ã€•` â†’ `[` `]`
   - å…¨è§’ç©ºæ ¼ï¼š`ã€€` â†’ ` `

4. **æ ¼å¼éªŒè¯**ï¼š
   - æ£€æŸ¥ JSON æ˜¯å¦ä»¥ `{` æˆ– `[` å¼€å¤´
   - æ£€æŸ¥æ˜¯å¦åŒ…å«éæ³•èŒƒå›´ç¬¦å· `~`
   - æ£€æŸ¥æ˜¯å¦åŒ…å«åƒä½åˆ†éš”ç¬¦ `98,000`

5. **é›¶å®½å­—ç¬¦æ¸…ç†**ï¼šè‡ªåŠ¨ç§»é™¤ BOM å’Œé›¶å®½å­—ç¬¦ (U+200B, U+200C, U+200D, U+FEFF)

**æ–°å¢æ–‡ä»¶**ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.claude/utils/json-parser.ts` | å…±äº« JSON è§£æå·¥å…·æ¨¡å— |

**ä¿®æ”¹çš„ Skill æ–‡ä»¶**ï¼š

| Skill | æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|-------|------|----------|
| content-writer | `content-writer.ts` | ä½¿ç”¨ `parseRobustJSON`ï¼Œprompt æ·»åŠ  XML æ ‡ç­¾æ ¼å¼è¯´æ˜ |
| viral-verification | `viral-verification.ts` | ä½¿ç”¨ `parseRobustJSON`ï¼Œprompt æ·»åŠ  XML æ ‡ç­¾æ ¼å¼è¯´æ˜ |
| prompt-generator | `prompt-generator.ts` | ä½¿ç”¨ `parseRobustJSON`ï¼Œprompt æ·»åŠ  XML æ ‡ç­¾æ ¼å¼è¯´æ˜ |
| image-search | `image-search.ts` | ä½¿ç”¨ `parseRobustJSON`ï¼Œprompt æ·»åŠ  XML æ ‡ç­¾æ ¼å¼è¯´æ˜ |
| x-trends | `x-trends.ts` | ä½¿ç”¨ `parseRobustJSON`ï¼Œprompt æ·»åŠ  XML æ ‡ç­¾æ ¼å¼è¯´æ˜ |
| tophub-trends | `tophub.ts` | ä½¿ç”¨ `parseRobustJSON`ï¼Œprompt æ·»åŠ  XML æ ‡ç­¾æ ¼å¼è¯´æ˜ |

**json-parser.ts å¯¼å‡ºçš„å‡½æ•°**ï¼š

| å‡½æ•° | è¯´æ˜ |
|------|------|
| `removeInvisibleRunes(s)` | ç§»é™¤é›¶å®½å­—ç¬¦å’Œ BOM |
| `fixFullWidthChars(s)` | ä¿®å¤å…¨è§’å­—ç¬¦ |
| `validateJSONFormat(s)` | éªŒè¯ JSON æ ¼å¼ |
| `extractFromXmlTag(s, tag)` | ä» XML æ ‡ç­¾æå–å†…å®¹ |
| `extractReasoning(s)` | æå–æ€ç»´é“¾ |
| `extractJSON(s)` | å¤šå±‚å›é€€ JSON æå– |
| `parseRobustJSON<T>(s, validator?)` | ä¸»è§£æå‡½æ•°ï¼Œæ”¯æŒè‡ªå®šä¹‰éªŒè¯å™¨ |
| `generateXMLOutputInstructions(schema)` | ç”Ÿæˆ XML æ ¼å¼è¾“å‡ºè¯´æ˜ |
| `generateSimpleOutputInstructions(schema)` | ç”Ÿæˆç®€åŒ–è¾“å‡ºè¯´æ˜ |

**Prompt æ ¼å¼æ¨¡æ¿**ï¼š
```
**å¿…é¡»ä½¿ç”¨ XML æ ‡ç­¾åˆ†éš”æ€ç»´è¿‡ç¨‹å’Œ JSON ç»“æœï¼Œé¿å…è§£æé”™è¯¯**

## æ ¼å¼è¦æ±‚

<reasoning>
ä½ çš„æ€ç»´è¿‡ç¨‹åˆ†æ...
</reasoning>

<result>
{ ... JSON å†…å®¹ ... }
</result>

## æ³¨æ„äº‹é¡¹
1. <result> æ ‡ç­¾å†…å¿…é¡»æ˜¯åˆæ³•çš„ JSON æ ¼å¼
2. å†…å®¹ä¸­çš„æ¢è¡Œä½¿ç”¨ \\n è¡¨ç¤º
3. å†…å®¹ä¸­çš„åŒå¼•å·ä½¿ç”¨ \\" è½¬ä¹‰
4. ä¸è¦åœ¨ <result> æ ‡ç­¾å†…æ·»åŠ  markdown ä»£ç å—
5. æ‰€æœ‰æ ‡ç‚¹ç¬¦å·å¿…é¡»ä½¿ç”¨è‹±æ–‡åŠè§’å­—ç¬¦
```

---

### 3.15 Twitter OAuth 2.0 é›†æˆ (v2.7.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šé›†æˆ Twitter OAuth 2.0 è®¤è¯ï¼Œæ”¯æŒç”¨æˆ·æˆæƒåç›´æ¥é€šè¿‡åº”ç”¨å‘å¸ƒæ¨æ–‡åˆ° X å¹³å°ã€‚

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- ç”¨æˆ·é€šè¿‡ OAuth 2.0 æˆæƒè¿æ¥ Twitter è´¦å·
- æ”¯æŒä»£è¡¨ç”¨æˆ·å‘å¸ƒæ¨æ–‡ï¼ˆæ–‡å­— + å¯é€‰å›¾ç‰‡ï¼‰
- è‡ªåŠ¨åˆ·æ–°è¿‡æœŸçš„ access token
- æ–­å¼€ Twitter è¿æ¥åŠŸèƒ½

**æŠ€æœ¯å®ç°**ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `src/routes/twitter.js` | Twitter OAuth è·¯ç”±ï¼ˆæˆæƒã€å›è°ƒã€å‘æ¨ã€çŠ¶æ€æŸ¥è¯¢ï¼‰ |
| `src/config/database.js` | æ–°å¢ `twitter_credentials` è¡¨å­˜å‚¨ç”¨æˆ· token |
| `src/server.js` | æ³¨å†Œ `/api/twitter` è·¯ç”± |
| `.env.example` | æ·»åŠ  Twitter OAuth é…ç½®é¡¹ |

**API ç«¯ç‚¹**ï¼š

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| GET | /api/twitter/auth | è·å– OAuth æˆæƒ URL |
| GET | /api/twitter/callback | OAuth å›è°ƒå¤„ç† |
| GET | /api/twitter/status | æŸ¥è¯¢ Twitter è¿æ¥çŠ¶æ€ |
| DELETE | /api/twitter/disconnect | æ–­å¼€ Twitter è¿æ¥ |
| POST | /api/twitter/tweet | å‘å¸ƒæ¨æ–‡ |

**æ•°æ®åº“è¡¨ç»“æ„**ï¼š
```sql
CREATE TABLE twitter_credentials (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE UNIQUE,
    twitter_user_id VARCHAR(100),
    twitter_username VARCHAR(100),
    access_token TEXT NOT NULL,
    refresh_token TEXT,
    token_expires_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**OAuth 2.0 æµç¨‹**ï¼š
1. å‰ç«¯è°ƒç”¨ `/api/twitter/auth` è·å–æˆæƒ URL
2. ç”¨æˆ·è·³è½¬åˆ° Twitter æˆæƒé¡µé¢
3. æˆæƒåå›è°ƒåˆ° `/api/twitter/callback`
4. åç«¯äº¤æ¢ code è·å– access_token å¹¶å­˜å‚¨
5. å‰ç«¯å¯è°ƒç”¨ `/api/twitter/tweet` å‘å¸ƒæ¨æ–‡

**å®‰å…¨ç‰¹æ€§**ï¼š
- PKCE (Proof Key for Code Exchange) é˜²æ­¢æˆæƒç æ‹¦æˆªæ”»å‡»
- State å‚æ•°é˜²æ­¢ CSRF æ”»å‡»
- Token è‡ªåŠ¨åˆ·æ–°æœºåˆ¶

**ç¯å¢ƒå˜é‡é…ç½®**ï¼š
```env
TWITTER_CLIENT_ID=ä½ çš„Client_ID
TWITTER_CLIENT_SECRET=ä½ çš„Client_Secret
TWITTER_CALLBACK_URL=http://localhost:3000/api/twitter/callback
```

**ä¸¤ç§ä½¿ç”¨æ¨¡å¼**ï¼š

| æ¨¡å¼ | è¯´æ˜ | API |
|------|------|-----|
| Twitter ç™»å½• | ç”¨æˆ·ç›´æ¥ç”¨ Twitter è´¦å·ç™»å½•ï¼Œæ— éœ€æ³¨å†Œ | `/api/twitter/login` |
| Twitter ç»‘å®š | å·²ç™»å½•ç”¨æˆ·ç»‘å®š Twitter è´¦å·ç”¨äºå‘æ¨ | `/api/twitter/auth` |

**ç™»å½•é¡µé¢**ï¼š
- æ”¯æŒç”¨æˆ·åå¯†ç ç™»å½•
- æ”¯æŒã€Œç”¨ Twitter ç™»å½•ã€ä¸€é”®ç™»å½•
- Twitter ç™»å½•è‡ªåŠ¨åˆ›å»ºç”¨æˆ·è´¦å·

**æäº¤é¡µé¢**ï¼š

| çŠ¶æ€ | æ˜¾ç¤ºå†…å®¹ |
|------|----------|
| æœªè¿æ¥ | æ˜¾ç¤ºã€Œè¿æ¥ Twitterã€æŒ‰é’® |
| å·²è¿æ¥ | æ˜¾ç¤º @ç”¨æˆ·åã€ã€Œå‘å¸ƒåˆ° Xã€æŒ‰é’®ã€ã€Œæ–­å¼€è¿æ¥ã€æŒ‰é’® |
| å‘å¸ƒæˆåŠŸ | æ˜¾ç¤ºæˆåŠŸæç¤ºå’Œã€ŒæŸ¥çœ‹æ¨æ–‡ã€é“¾æ¥ |

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š
- `src/routes/twitter.js` - æ·»åŠ ç™»å½•æ¨¡å¼æ”¯æŒ
- `src/config/database.js` - users è¡¨æ·»åŠ  twitter_idã€avatar_url å­—æ®µ
- `public/index.html` - ç™»å½•é¡µæ·»åŠ  Twitter ç™»å½•æŒ‰é’®
- `public/js/app.js` - å¤„ç† Twitter ç™»å½•å›è°ƒ
- `public/js/generator/index.js` - æ·»åŠ  Twitter API æ–¹æ³•
- `public/js/generator/pages/submit.js` - æ·»åŠ  Twitter è¿æ¥å’Œå‘å¸ƒ UI
- `public/css/style.css` - æ·»åŠ ç™»å½•é¡µ Twitter æŒ‰é’®æ ·å¼
- `public/css/generator.css` - æ·»åŠ æäº¤é¡µ Twitter ç›¸å…³æ ·å¼

---

### 3.14 ç¼–è¾‘æ¡†è‡ªåŠ¨é«˜åº¦è°ƒæ•´ (v2.6.1)

**åŠŸèƒ½æ¦‚è¿°**ï¼šç¼–è¾‘æ¨æ–‡çš„ textarea è‡ªåŠ¨è°ƒæ•´é«˜åº¦ä»¥é€‚åº”å†…å®¹é•¿åº¦ï¼Œç”¨æˆ·æ— éœ€æ»šåŠ¨å³å¯çœ‹åˆ°å…¨æ–‡ã€‚

**ä¿®æ”¹çš„é¡µé¢**ï¼š
- `content.js` - åˆ›ä½œç´ æç¼–è¾‘æ¡†ã€ç”Ÿæˆç»“æœç¼–è¾‘æ¡†
- `optimize.js` - ä¼˜åŒ–åç‰ˆæœ¬ç¼–è¾‘æ¡†

**æŠ€æœ¯å®ç°**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `public/js/generator/pages/content.js` | æ·»åŠ  `autoResizeTextarea()` æ–¹æ³•ï¼Œç»‘å®šåˆ° `#input-text` å’Œ `#content-input` |
| `public/js/generator/pages/optimize.js` | æ·»åŠ  `autoResizeTextarea()` æ–¹æ³•ï¼Œç»‘å®šåˆ° `#optimized-input`ï¼ŒTab åˆ‡æ¢æ—¶é‡æ–°è°ƒæ•´ |
| `public/css/generator.css` | `.content-textarea` è®¾ç½® `resize: none` å’Œ `overflow: hidden` |

**å·¥ä½œåŸç†**ï¼š
1. textarea åŠ è½½æ—¶è‡ªåŠ¨è°ƒæ•´é«˜åº¦
2. ç”¨æˆ·è¾“å…¥æ—¶å®æ—¶è°ƒæ•´é«˜åº¦
3. æœ€å°é«˜åº¦ï¼šåˆ›ä½œç´ æ 300pxï¼Œå…¶ä»– 200px
4. ç¦ç”¨æ‰‹åŠ¨æ‹–æ‹½è°ƒæ•´å’Œæ»šåŠ¨æ¡

---

### 3.13 å›¾ç‰‡ç”Ÿæˆæµç¨‹æ‹†åˆ† (v2.6.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šå°†åŸæ¥çš„"ç”Ÿæˆå›¾ç‰‡"æ­¥éª¤æ‹†åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹æ­¥éª¤ï¼Œè®©ç”¨æˆ·å¯ä»¥å…ˆé¢„è§ˆå’Œç¼–è¾‘ Promptï¼Œå†å†³å®šæ˜¯å¦ç”Ÿæˆå›¾ç‰‡ã€‚

**æ–°å·¥ä½œæµç¨‹**ï¼š
```
çƒ­å¸–æŠ“å– â†’ ç”Ÿæˆå†…å®¹ â†’ ä¼˜åŒ–å†…å®¹ â†’ å›¾ç‰‡æè¿° â†’ ç”Ÿæˆå›¾ç‰‡ â†’ æäº¤å‘å¸ƒ
(å¿…é€‰)     (å¿…é€‰)     (å¯è·³è¿‡)   (å¯è·³è¿‡)   (å¯è·³è¿‡)   (å±•ç¤º)
```

**æ–°å¢æ­¥éª¤**ï¼š
| æ­¥éª¤ | åç§° | åŠŸèƒ½ |
|------|------|------|
| prompt | å›¾ç‰‡æè¿° | ç”Ÿæˆå’Œç¼–è¾‘å›¾ç‰‡ Promptï¼Œæ˜¾ç¤ºé£æ ¼/æ°›å›´/è‰²è°ƒ/å…ƒç´ ç­‰è¯¦æƒ… |
| image | ç”Ÿæˆå›¾ç‰‡ | ä½¿ç”¨ Prompt ç”Ÿæˆå®é™…å›¾ç‰‡ï¼Œæ”¯æŒé‡æ–°ç”Ÿæˆ |

**æŠ€æœ¯å®ç°**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `public/js/generator/state.js` | workflowSteps æ·»åŠ  prompt æ­¥éª¤ |
| `public/js/generator/pages/prompt.js` | æ–°å¢ Prompt é¡µé¢ç»„ä»¶ |
| `public/js/generator/pages/image.js` | ç®€åŒ–ä¸ºçº¯å›¾ç‰‡ç”Ÿæˆï¼Œä» prompt_data è·å–æè¿° |
| `public/js/generator/index.js` | æ³¨å†Œ PromptPage |
| `public/index.html` | æ·»åŠ  prompt.js è„šæœ¬å¼•ç”¨ |
| `src/routes/tasks.js` | æ·»åŠ  prompt æ­¥éª¤æ”¯æŒã€savePrompt/updatePromptData action |
| `src/config/database.js` | æ·»åŠ  prompt_data JSONB åˆ— |

**Prompt é¡µé¢åŠŸèƒ½**ï¼š
- è‡ªåŠ¨ä»ä¼˜åŒ–å†…å®¹ç”Ÿæˆå›¾ç‰‡æè¿° Prompt
- æ˜¾ç¤ºç”Ÿæˆçš„ Prompt è¯¦æƒ…ï¼ˆé£æ ¼ã€æ°›å›´ã€è‰²è°ƒã€è§†è§‰å…ƒç´ ï¼‰
- æ”¯æŒæ‰‹åŠ¨ç¼–è¾‘ Prompt
- æ”¯æŒé‡æ–°ç”Ÿæˆ
- è‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“

**Image é¡µé¢ç®€åŒ–**ï¼š
- åªè´Ÿè´£å›¾ç‰‡ç”Ÿæˆï¼Œä¸å†ç”Ÿæˆ Prompt
- ä» task.prompt_data è¯»å– Prompt
- è¿”å›ä¸Šä¸€æ­¥è·³è½¬åˆ° prompt è€Œé optimize

---

### 3.12 åˆ›ä½œæ–¹å‘å¤šæ¡æ˜¾ç¤ºä¿®å¤ (v2.5.0)

**é—®é¢˜**ï¼šé€‰é¢˜å»ºè®®ä¸­çš„"åˆ›ä½œæ–¹å‘"åªæ˜¾ç¤ºä¸€æ¡ï¼Œåº”è¯¥æ˜¾ç¤ºå¤šæ¡ã€‚

**åŸå› **ï¼šJSON Schema ä¸­ `direction` å®šä¹‰ä¸ºå•ä¸ªå­—ç¬¦ä¸²ï¼Œåº”æ”¹ä¸ºæ•°ç»„ã€‚

**ä¿®å¤**ï¼š
- ä¿®æ”¹ `.claude/x-trends/x-trends.ts` å’Œ `.claude/tophub-trends/tophub.ts`
- å°† `direction` æ”¹ä¸º `directions` æ•°ç»„æ ¼å¼
- å‰ç«¯ `trends.js` å’Œ `content.js` æ”¯æŒæ–°çš„æ•°ç»„æ ¼å¼ï¼ŒåŒæ—¶å…¼å®¹æ—§æ ¼å¼

---

### 3.11 åŒä¸»é¢˜ç³»ç»Ÿ - å¯åˆ‡æ¢ Light/Dark ä¸»é¢˜ (v2.4.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šæ·»åŠ ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ï¼Œæ”¯æŒæ¸…æ–°æµ…è‰²ä¸»é¢˜å’Œæš—è‰²ä¸»é¢˜ï¼Œç”¨æˆ·å¯æ‰‹åŠ¨åˆ‡æ¢å¹¶æŒä¹…åŒ–ä¿å­˜åå¥½ã€‚

**ä¸¤å¥—ä¸»é¢˜**ï¼š

| ä¸»é¢˜ | åç§° | é£æ ¼ |
|------|------|------|
| Light | Fresh & Clean | ç®€å•æ¸…æ–°ï¼Œè“ç»¿é…è‰²ï¼Œç™½è‰²èƒŒæ™¯ |
| Dark | Cosmic Noir | æ·±é‚ƒå®‡å®™ï¼Œé’ç´«éœ“è™¹ï¼Œæš—è‰²èƒŒæ™¯ |

**Light ä¸»é¢˜é…è‰²**ï¼š
- èƒŒæ™¯ï¼š#f8fafc (æµ…ç°ç™½)
- ä¸»è‰²ï¼š#0ea5e9 (æ¸…æ–°è“) + #10b981 (è–„è·ç»¿)
- è¡¨é¢ï¼š#ffffff (çº¯ç™½å¡ç‰‡)
- æ–‡å­—ï¼š#0f172a (æ·±ç°)

**Dark ä¸»é¢˜é…è‰²**ï¼š
- èƒŒæ™¯ï¼š#0f172a (æ·±è“é»‘)
- ä¸»è‰²ï¼š#22d3ee (éœ“è™¹é’) + #a78bfa (æ·¡ç´«)
- è¡¨é¢ï¼šrgba(30, 41, 59, 0.8) (åŠé€æ˜)
- æ˜Ÿå°˜åŠ¨ç”»èƒŒæ™¯æ•ˆæœ

**æŠ€æœ¯å®ç°**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `public/css/style.css` | åŒä¸»é¢˜ CSS å˜é‡ (`[data-theme="light"]` / `[data-theme="dark"]`) |
| `public/css/generator.css` | ç»Ÿä¸€ä½¿ç”¨ CSS å˜é‡ï¼Œå…¼å®¹åŒä¸»é¢˜ |
| `public/index.html` | æ·»åŠ ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ã€é˜²é—ªçƒè„šæœ¬ |
| `public/js/app.js` | ä¸»é¢˜åˆ‡æ¢é€»è¾‘ + localStorage æŒä¹…åŒ– |

**ä¸»é¢˜åˆ‡æ¢æŒ‰é’®**ï¼š
- ä½ç½®ï¼šé¡µé¢å³ä¸Šè§’å›ºå®š
- å›¾æ ‡ï¼šâ˜€ï¸ (æµ…è‰²) / ğŸŒ™ (æ·±è‰²)
- ç‚¹å‡»åˆ‡æ¢ä¸»é¢˜ï¼Œè‡ªåŠ¨ä¿å­˜åˆ° localStorage

**é˜²é—ªçƒæœºåˆ¶**ï¼š
```html
<script>
    (function() {
        var theme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', theme);
    })();
</script>
```

**å­—ä½“**ï¼š
- Plus Jakarta Sans + Inter (Google Fonts)

---

### 3.9 å®šæ—¶è¶‹åŠ¿æŠ“å–ç³»ç»Ÿ (v2.2.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šå®ç°å®šæ—¶è‡ªåŠ¨æŠ“å– X è¶‹åŠ¿å’Œ TopHub æ•°æ®ï¼Œç”¨æˆ·è®¿é—®åªè¯»ç¼“å­˜ï¼Œä¸è§¦å‘æ–°çš„æŠ“å–æ“ä½œã€‚

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- **å®šæ—¶æŠ“å–**ï¼šæ¯å°æ—¶ç¬¬1åˆ†é’Ÿè‡ªåŠ¨æ‰§è¡Œ x-trends å’Œ tophub-trends æŠ“å–
- **çº¯è¯»å–æ¨¡å¼**ï¼šç”¨æˆ· API åªè¯»å–ç¼“å­˜ï¼Œæ°¸ä¸è§¦å‘æ–°çš„æŠ“å–
- **ç¼“å­˜æŒä¹…åŒ–**ï¼šç¼“å­˜æ•°æ®ä¿å­˜åˆ°ç£ç›˜ï¼ŒæœåŠ¡é‡å¯åè‡ªåŠ¨æ¢å¤
- **é¦–æ¬¡å¯åŠ¨æŠ“å–**ï¼šæœåŠ¡å¯åŠ¨æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡æŠ“å–

**æŠ€æœ¯å®ç°**ï¼š

| æ¨¡å— | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| è°ƒåº¦æœåŠ¡ | `src/services/scheduler.js` | node-cron å®šæ—¶ä»»åŠ¡ï¼Œæ¯å°æ—¶1åˆ†é’Ÿæ‰§è¡Œ |
| ç¼“å­˜æŒä¹…åŒ– | `src/services/skillCache.js` | æ·»åŠ ç£ç›˜æŒä¹…åŒ–åŠŸèƒ½ |
| åªè¯» API | `src/routes/skills.js` | æ–°å¢ `GET /:skillId/cached` ç«¯ç‚¹ |
| æœåŠ¡é›†æˆ | `src/server.js` | å¯åŠ¨æ—¶åˆå§‹åŒ–è°ƒåº¦å™¨ |

**API ç«¯ç‚¹**ï¼š
| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| GET | /api/skills/:skillId/cached | è¯»å–è¶‹åŠ¿ç¼“å­˜ï¼ˆçº¯è¯»å–ï¼‰ |

**ç¼“å­˜ç›®å½•**ï¼š`outputs/.cache/`
- `x-trends.cache.json` - X è¶‹åŠ¿ç¼“å­˜
- `tophub-trends.cache.json` - TopHub ç¼“å­˜

**è°ƒåº¦è§„åˆ™**ï¼š
- Cron è¡¨è¾¾å¼ï¼š`1 * * * *`ï¼ˆæ¯å°æ—¶ç¬¬1åˆ†é’Ÿï¼‰
- æ—¶åŒºï¼šAsia/Shanghai
- å¹¶å‘ä¿æŠ¤ï¼šä¸Šä¸€æ¬¡æŠ“å–æœªå®Œæˆæ—¶è·³è¿‡æœ¬æ¬¡

---


### 1. æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡
- è®¾è®¡äº†ç³»ç»Ÿæ¶æ„ï¼šæµè§ˆå™¨ â†” WebSocket â†” Node.js â†” Claude CLI
- ç¡®å®šæŠ€æœ¯æ ˆï¼šExpress + WebSocket + PostgreSQL (Neon)
- è®¾è®¡äº†æ•°æ®åº“è¡¨ç»“æ„ï¼ˆusers, sessions, messagesï¼‰
- å®šä¹‰äº† REST API å’Œ WebSocket æ¶ˆæ¯åè®®

### 2. åç«¯å®ç°
- `src/server.js` - ä¸»æœåŠ¡å™¨å…¥å£
- `src/config/database.js` - æ•°æ®åº“è¿æ¥å’Œåˆå§‹åŒ–
- `src/routes/auth.js` - ç”¨æˆ·æ³¨å†Œ/ç™»å½• API
- `src/routes/sessions.js` - ä¼šè¯ç®¡ç† API
- `src/services/claude.js` - Claude CLI è°ƒç”¨æœåŠ¡
- `src/websocket/handler.js` - WebSocket æ¶ˆæ¯å¤„ç†
- `src/middleware/auth.js` - JWT è®¤è¯ä¸­é—´ä»¶

### 3. å‰ç«¯å®ç°
- `public/index.html` - å•é¡µåº”ç”¨ä¸»é¡µé¢
- `public/css/style.css` - æ¸…æ–°ä¸»é¢˜æ ·å¼ï¼ˆæ™¨æ›¦å¾®é£ï¼‰
- `public/js/app.js` - å‰ç«¯åº”ç”¨é€»è¾‘

### 3.1 å‰ç«¯ç¾åŒ– (v1.1.0)
**è®¾è®¡ç†å¿µ**ï¼šã€Œæ™¨æ›¦å¾®é£ã€- æ¸…æ™¨çš„è–„é›¾ã€éœ²ç èˆ¬çš„é€æ˜æ„Ÿã€æ¸…æ–°è‡ªç„¶çš„è‰²è°ƒ

**é…è‰²æ–¹æ¡ˆ**ï¼š
- èƒŒæ™¯ï¼šæ·¡ç»¿ç™½æ¸å˜ (#f0fdf4 â†’ #ecfeff)
- ä¸»è‰²è°ƒï¼šè–„è·ç»¿ (#10b981)
- è¾…åŠ©è‰²ï¼šå¤©è“ (#0ea5e9)
- è¡¨é¢ï¼šæ¯›ç»ç’ƒç™½ (rgba(255, 255, 255, 0.85))

**å­—ä½“**ï¼šQuicksand - åœ†æ¶¦ã€å‹å¥½ã€ç°ä»£çš„æ— è¡¬çº¿å­—ä½“

**è§†è§‰ç‰¹æ•ˆ**ï¼š
- æ¯›ç»ç’ƒæ•ˆæœ (Glassmorphism)
- æŸ”å’Œçš„æ¸å˜èƒŒæ™¯è£…é¥°
- å¹³æ»‘çš„ CSS è¿‡æ¸¡åŠ¨ç”»
- æ¶ˆæ¯æ°”æ³¡æ»‘å…¥åŠ¨ç”»
- æµå¼è¾“å‡ºå…‰æ ‡é—ªçƒæ•ˆæœ
- æŒ‰é’®æ‚¬æµ®å’Œå…‰æ³½æ•ˆæœ
- å‘é€æŒ‰é’®åŠ è½½æ—‹è½¬åŠ¨ç”»

**UI æ”¹è¿›**ï¼š
- ç™»å½•é¡µé¢å±…ä¸­å¸ƒå±€ï¼Œä¼˜åŒ–è¡¨å•è®¾è®¡
- ä¾§è¾¹æ æ¯›ç»ç’ƒæ•ˆæœ
- ä¼šè¯åˆ—è¡¨æ¸å˜é«˜äº®
- æ¶ˆæ¯æ°”æ³¡åœ†è§’è®¾è®¡
- AI æ¶ˆæ¯å¸¦è¡¨æƒ…å›¾æ ‡
- ä»£ç å—æ·±è‰²ä¸»é¢˜
- å“åº”å¼è®¾è®¡ä¼˜åŒ–

### 3.2 ç§»åŠ¨ç«¯ä¼˜åŒ– (v1.2.0)

**å“åº”å¼æ–­ç‚¹**ï¼š
- å¹³æ¿ (â‰¤900px)ï¼šä¾§è¾¹æ æ”¶çª„ã€æ¶ˆæ¯æ°”æ³¡åŠ å®½
- æ‰‹æœº (â‰¤768px)ï¼šæŠ½å±‰å¼ä¾§è¾¹æ ã€é¡¶éƒ¨å¯¼èˆªæ 
- å°å±æ‰‹æœº (â‰¤375px)ï¼šç´§å‡‘å¸ƒå±€
- æ¨ªå±æ¨¡å¼ï¼šç‰¹æ®Šé€‚é…

**ç§»åŠ¨ç«¯å¯¼èˆª**ï¼š
- é¡¶éƒ¨å›ºå®šå¯¼èˆªæ ï¼ˆæ±‰å ¡èœå• + æ ‡é¢˜ + æ–°å¯¹è¯æŒ‰é’®ï¼‰
- æŠ½å±‰å¼ä¾§è¾¹æ ï¼ˆ85% å®½åº¦ï¼Œæœ€å¤§ 320pxï¼‰
- é®ç½©å±‚ç‚¹å‡»å…³é—­

**è§¦æ‘¸äº¤äº’ä¼˜åŒ–**ï¼š
- æ‰€æœ‰å¯äº¤äº’å…ƒç´ æœ€å° 44px è§¦æ‘¸ç›®æ ‡
- ä»å·¦è¾¹ç¼˜å³æ»‘æ‰“å¼€ä¾§è¾¹æ 
- ä¾§è¾¹æ å†…å·¦æ»‘å…³é—­
- é€‰æ‹©ä¼šè¯åè‡ªåŠ¨å…³é—­ä¾§è¾¹æ 
- å‘é€æ¶ˆæ¯åè‡ªåŠ¨æ”¶èµ·é”®ç›˜
- é˜²æ­¢ iOS åŒå‡»ç¼©æ”¾

**å®‰å…¨åŒºåŸŸé€‚é…**ï¼š
- æ”¯æŒ iPhone X åŠä»¥ä¸Šåˆ˜æµ·å±
- ä½¿ç”¨ env(safe-area-inset-*) é€‚é…
- åŠ¨æ€è§†å£é«˜åº¦ (100dvh) é€‚é…åœ°å€æ 

**è¾“å…¥ä½“éªŒ**ï¼š
- ç§»åŠ¨ç«¯ Enter é”®æ¢è¡Œï¼ˆä½¿ç”¨æŒ‰é’®å‘é€ï¼‰
- æ¡Œé¢ç«¯ Enter å‘é€ï¼ŒShift+Enter æ¢è¡Œ
- è¾“å…¥æ¡†æœ€å° 16px å­—ä½“é˜²æ­¢ iOS ç¼©æ”¾
- é”®ç›˜å¼¹å‡ºæ—¶è‡ªåŠ¨è°ƒæ•´è¾“å…¥åŒºåŸŸä½ç½®
- è¾“å…¥æ¡†é«˜åº¦è‡ªåŠ¨è°ƒæ•´ï¼ˆç§»åŠ¨ç«¯æœ€å¤§ 120pxï¼‰

**æ€§èƒ½ä¼˜åŒ–**ï¼š
- è§¦æ‘¸è®¾å¤‡ç¦ç”¨ hover æ•ˆæœ
- ä½¿ç”¨ requestAnimationFrame ä¼˜åŒ–æ»šåŠ¨
- å¹³æ»‘æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
- passive äº‹ä»¶ç›‘å¬å™¨

**PWA å‡†å¤‡**ï¼š
- æ·»åŠ  apple-mobile-web-app-capable
- æ·»åŠ  theme-color
- ç¦ç”¨ç”µè¯å·ç è‡ªåŠ¨æ£€æµ‹
- ç¦ç”¨ç”¨æˆ·ç¼©æ”¾

### 3.3 Claude CLI æœåŠ¡æ¶æ„ (v1.4.0)

**æ¶æ„è®¾è®¡**ï¼šæ¯æ¬¡è¯·æ±‚å¯åŠ¨æ–°è¿›ç¨‹ï¼Œé€šè¿‡ `--resume` ä¿æŒä¼šè¯ä¸Šä¸‹æ–‡ã€‚

```
ç”¨æˆ·å‘æ¶ˆæ¯ â†’ spawn claude -p "æ¶ˆæ¯" --resume <session_id> â†’ æµå¼è¾“å‡º â†’ è¿›ç¨‹é€€å‡º
```

**æ ¸å¿ƒç»„ä»¶**ï¼š
- `ClaudeService` - Claude CLI è°ƒç”¨æœåŠ¡ï¼ˆå•ä¾‹ï¼‰

**ç‰¹æ€§**ï¼š
- ç®€å•å¯é çš„è¿›ç¨‹ç®¡ç†
- é€šè¿‡ `--resume` å‚æ•°æ¢å¤ä¼šè¯ä¸Šä¸‹æ–‡
- æµå¼ JSON è¾“å‡º (`--output-format stream-json`)
- 2åˆ†é’Ÿè¶…æ—¶ä¿æŠ¤
- session_id æŒä¹…åŒ–åˆ°æ•°æ®åº“

**é€šä¿¡åè®®**ï¼š
```bash
# å‘½ä»¤æ ¼å¼
claude -p "ç”¨æˆ·æ¶ˆæ¯" --output-format stream-json --resume <session_id>

# è¾“å‡º (stdout, æ¯è¡Œä¸€ä¸ª JSON)
{"type":"assistant","message":{"content":[{"type":"text","text":"å›å¤"}]},"session_id":"xxx"}
{"type":"result","session_id":"xxx",...}
```

**ä¼šè¯æ¢å¤**ï¼š
- æ¯æ¬¡è¯·æ±‚è¿”å› session_id
- session_id ä¿å­˜åˆ°æ•°æ®åº“ sessions.claude_session_id
- ä¸‹æ¬¡è¯·æ±‚ä½¿ç”¨ `--resume <session_id>` æ¢å¤ä¸Šä¸‹æ–‡

### 3.4 Skill å·¥å…·æ  (v1.5.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šåœ¨ä¸»ç•Œé¢æ·»åŠ  Skill å·¥å…·æ ï¼Œæ”¯æŒä¸€é”®æ‰§è¡Œé¢„å®šä¹‰çš„ Skill åˆ†æä»»åŠ¡ã€‚

**æ”¯æŒçš„ Skills**ï¼š
- **X è¶‹åŠ¿åˆ†æ**: æŠ“å– trends24.in çš„ X(Twitter) 24å°æ—¶çƒ­é—¨è¶‹åŠ¿ï¼Œåˆ†æå‰15ä¸ªçƒ­ç‚¹ï¼Œç”Ÿæˆé€‰é¢˜å»ºè®®æŠ¥å‘Š
- **TopHub çƒ­æ¦œåˆ†æ**: æŠ“å– TopHub çƒ­æ¦œæ•°æ®ï¼Œåˆ†æçƒ­é—¨è¯é¢˜ï¼Œç”Ÿæˆå†…å®¹åˆ›ä½œå»ºè®®

**æŠ€æœ¯å®ç°**ï¼š
- åç«¯ API: `src/routes/skills.js` - Skill åˆ—è¡¨è·å–å’Œæ‰§è¡Œ API
- å‰ç«¯å·¥å…·æ : è¾“å…¥æ¡†ä¸Šæ–¹çš„æŒ‰é’®æ ï¼Œç‚¹å‡»å³å¯æ‰§è¡Œå¯¹åº” Skill
- æµå¼è¾“å‡º: ä½¿ç”¨ Server-Sent Events (SSE) å®æ—¶æ˜¾ç¤ºæ‰§è¡Œè¿›åº¦
- Markdown æ¸²æŸ“: å¢å¼ºçš„ Markdown æ ¼å¼åŒ–ï¼Œæ”¯æŒè¡¨æ ¼ã€æ ‡é¢˜ã€åˆ—è¡¨ç­‰

**Skill ç›®å½•ç»“æ„**ï¼š
```
.claude/
â”œâ”€â”€ x-trends/
â”‚   â”œâ”€â”€ SKILL.md        # Skill è¯´æ˜æ–‡æ¡£
â”‚   â””â”€â”€ x-trends.ts     # è¶‹åŠ¿æŠ“å–å’Œåˆ†æè„šæœ¬
â””â”€â”€ tophub-trends/
    â”œâ”€â”€ SKILL.md
    â””â”€â”€ tophub.ts
```

**è¾“å‡ºç›®å½•**ï¼š
- åŸå§‹æ•°æ®: `outputs/trends/x_trends_[timestamp].json`
- åˆ†ææŠ¥å‘Š: `outputs/trends/x_trends_analysis_[timestamp].md`

### 3.5 Skill ç¼“å­˜æœºåˆ¶ (v1.6.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šä¸º Skill æ‰§è¡Œç»“æœæ·»åŠ æ™ºèƒ½ç¼“å­˜ï¼Œå‡å°‘é‡å¤æ‰§è¡Œï¼Œæå‡å“åº”é€Ÿåº¦ã€‚

**ç¼“å­˜ç­–ç•¥**ï¼š
| Skill | ç¼“å­˜æ—¶é—´ | è¯´æ˜ |
|-------|----------|------|
| x-trends | 1 å°æ—¶ | X è¶‹åŠ¿æ¯å°æ—¶æ›´æ–° |
| tophub-trends | 24 å°æ—¶ | TopHub çƒ­æ¦œæ›´æ–°è¾ƒæ…¢ |

**å¹¶å‘æ§åˆ¶**ï¼š
- å¤šç”¨æˆ·åŒæ—¶è¯·æ±‚åŒä¸€ Skill æ—¶ï¼Œåªæ‰§è¡Œä¸€æ¬¡ç”Ÿæˆ
- åç»­è¯·æ±‚è‡ªåŠ¨ç­‰å¾…ç¬¬ä¸€ä¸ªè¯·æ±‚å®Œæˆ
- æ‰€æœ‰ç”¨æˆ·è·å¾—ç›¸åŒçš„ç¼“å­˜ç»“æœ

**ç”¨æˆ·äº¤äº’**ï¼š
- **å•å‡»æŒ‰é’®**: ä½¿ç”¨ç¼“å­˜ï¼ˆå¦‚æœ‰ï¼‰
- **é•¿æŒ‰æŒ‰é’® (800ms)**: å¼ºåˆ¶åˆ·æ–°ï¼Œå¿½ç•¥ç¼“å­˜
- ç¼“å­˜å†…å®¹åº•éƒ¨æ˜¾ç¤ºç”Ÿæˆæ—¶é—´å’Œç¼“å­˜æç¤º

**API æ¥å£**ï¼š
```
GET  /api/skills/cache/status     # è·å–ç¼“å­˜çŠ¶æ€
DELETE /api/skills/cache/:skillId # æ¸…é™¤æŒ‡å®šç¼“å­˜
POST /api/skills/:skillId/execute?refresh=true  # å¼ºåˆ¶åˆ·æ–°
```

**æŠ€æœ¯å®ç°**ï¼š
- ç¼“å­˜æœåŠ¡: `src/services/skillCache.js`
- å†…å­˜ç¼“å­˜ + TTL è¿‡æœŸæœºåˆ¶
- Promise ç­‰å¾…é˜Ÿåˆ—å¤„ç†å¹¶å‘

### 3.6 å†…å®¹åˆ›ä½œ Skill (v1.7.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šåŸºäº Defou x Stanley æ–¹æ³•è®ºçš„å†…å®¹åˆ›ä½œå·¥å…·ï¼Œè¾“å…¥ç´ æè‡ªåŠ¨ç”Ÿæˆä¸‰ä¸ªç‰ˆæœ¬çš„å†…å®¹ã€‚

**ä¸‰ä¸ªç‰ˆæœ¬**ï¼š
- **ğŸ”¥ ç‰ˆæœ¬ A (Stanley Style)**ï¼šè¿½æ±‚æè‡´çš„ç‚¹å‡»ç‡å’Œä¼ æ’­åº¦ï¼Œæƒ…ç»ªé¥±æ»¡ï¼Œé‡‘å¥é¢‘å‡º
- **ğŸ§  ç‰ˆæœ¬ B (Defou Style)**ï¼šä¾§é‡åº•å±‚é€»è¾‘æ‹†è§£å’Œæ·±åº¦è®¤çŸ¥ï¼Œæä¾›é•¿æœŸä»·å€¼
- **ğŸŒŸ ç‰ˆæœ¬ C (Combo Style)**ï¼šDefou x Stanley ç»ˆæèåˆç‰ˆï¼Œç»“åˆä¼ æ’­èŠ‚å¥ä¸æ·±åº¦å†…æ ¸

**æ™ºèƒ½è¯„ä¼°**ï¼š
| ç»´åº¦ | è¯´æ˜ |
|------|------|
| å¥½å¥‡å¿ƒ | å¼€ç¯‡æ˜¯å¦åˆ¶é€ è®¤çŸ¥ç¼ºå£ |
| å…±é¸£åº¦ | æ˜¯å¦å‡»ä¸­ç›®æ ‡ç”¨æˆ·ç—›ç‚¹ |
| æ¸…æ™°åº¦ | ç»“æ„æ˜¯å¦æ¸…æ™°æ˜“è¯» |
| ä¼ æ’­å€¼ | æ˜¯å¦å…·å¤‡æˆªå›¾ä¼ æ’­æ½œåŠ› |

**ä½¿ç”¨æ–¹å¼**ï¼š
1. ç‚¹å‡»å·¥å…·æ ã€Œå†…å®¹åˆ›ä½œã€æŒ‰é’®
2. åœ¨å¼¹çª—ä¸­è¾“å…¥ç´ æ/æƒ³æ³•
3. ç‚¹å‡»ã€Œç”Ÿæˆå†…å®¹ã€æˆ–æŒ‰ Ctrl+Enter æäº¤
4. ç­‰å¾…ç”Ÿæˆä¸‰ä¸ªç‰ˆæœ¬çš„å†…å®¹å’Œè¯„ä¼°ç»“æœ

**è¾“å‡ºç›®å½•**ï¼š`outputs/content/content_[timestamp].md`

**æ–‡ä»¶ç»“æ„**ï¼š
```
.claude/content-writer/
â”œâ”€â”€ SKILL.md           # Skill è¯´æ˜æ–‡æ¡£
â””â”€â”€ content-writer.ts  # å†…å®¹ç”Ÿæˆè„šæœ¬
```

### 3.7 çˆ†æ¬¾éªŒè¯ Skill (v1.7.2)

**åŠŸèƒ½æ¦‚è¿°**ï¼šå¯¹å·²ç”Ÿæˆçš„æ–‡ç« è¿›è¡Œ"çˆ†æ¬¾ä½“æ£€"ï¼Œè¯„ä¼°å†…å®¹çš„ç—…æ¯’å¼ä¼ æ’­æ½œåŠ›ï¼Œå¹¶æä¾›ä¼˜åŒ–ç‰ˆæœ¬ã€‚

**éªŒè¯çš„å…­å¤§çˆ†æ¬¾è¦ç´ **ï¼š
| è¦ç´  | è¯´æ˜ |
|------|------|
| å¥½å¥‡å¿ƒç¼ºå£ | æ ‡é¢˜/å¼€å¤´æ˜¯å¦åˆ¶é€ äº†è®©äººå¿ä¸ä½ç‚¹å‡»çš„å†²åŠ¨ |
| æƒ…ç»ªå…±é¸£ | æ˜¯å¦è§¦å‘äº†é«˜å”¤é†’æƒ…ç»ªï¼ˆæ„¤æ€’ã€æ•¬ç•ã€å–œæ‚¦ç­‰ï¼‰ |
| ä»·å€¼/å®ç”¨æ€§ | æ˜¯å¦å€¼å¾—æ”¶è—ï¼Œæä¾›å¯æ‰§è¡Œçš„ä»·å€¼ |
| å…³è”æ€§/æ—¶æ•ˆæ€§ | ä¸ºä»€ä¹ˆç°åœ¨å°±è¦çœ‹è¿™ä¸ª |
| å™äº‹/èŠ‚å¥ | èŠ‚å¥æ˜¯å¦å¸å¼•äººï¼ŒçŸ­å¥ã€ç•™ç™½ã€æ»‘æ¢¯æ•ˆåº” |
| åç›´è§‰/æ–°é¢–æ€§ | æ˜¯å¦æŒ‘æˆ˜ç°çŠ¶æˆ–æä¾›å…¨æ–°è§†è§’ |

**è¾“å‡ºå†…å®¹**ï¼š
- å…­ç»´è¯„åˆ†å¡ (æ¯é¡¹ 0-10 åˆ†)
- æ€»ä½“çˆ†æ¬¾æ½œåŠ›è¯„åˆ† (0-100)
- æ·±åº¦åˆ†æï¼ˆä¼˜ç‚¹ + ä¸è¶³ï¼‰
- ä¼˜åŒ–ç­–ç•¥å»ºè®®
- æœ€ç»ˆä¼˜åŒ–çˆ†æ¬¾ç‰ˆæœ¬

**ä½¿ç”¨æ–¹å¼**ï¼š
1. ç‚¹å‡»å·¥å…·æ ã€Œçˆ†æ¬¾éªŒè¯ã€æŒ‰é’®
2. åœ¨å¼¹çª—ä¸­ç²˜è´´å¾…éªŒè¯çš„æ–‡ç« å†…å®¹
3. ç‚¹å‡»ã€Œå¼€å§‹éªŒè¯ã€æˆ–æŒ‰ Ctrl+Enter æäº¤
4. ç­‰å¾…ç”ŸæˆéªŒè¯æŠ¥å‘Šå’Œä¼˜åŒ–ç‰ˆæœ¬

**è¾“å‡ºç›®å½•**ï¼š`outputs/viral-verified/verified_[timestamp].md`

**æ–‡ä»¶ç»“æ„**ï¼š
```
.claude/viral-verification/
â”œâ”€â”€ SKILL.md                 # Skill è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ index.ts                 # åŸç‰ˆ (ä½¿ç”¨ Anthropic SDK)
â””â”€â”€ viral-verification.ts    # é€‚é…ç‰ˆ (ä½¿ç”¨ Claude CLI)
```

### 3.8 X å¸–å­ç”Ÿæˆå™¨ (v2.0.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šå®Œå…¨æ›¿æ¢åŸæœ‰èŠå¤©ç•Œé¢ï¼Œå®ç°å¯è§†åŒ–çš„ X å¹³å°å¸–å­åˆ›ä½œæµç¨‹ã€‚

**å·¥ä½œæµç¨‹**ï¼š
```
çƒ­å¸–æŠ“å– â†’ ç”Ÿæˆå†…å®¹ â†’ ä¼˜åŒ–å†…å®¹ â†’ å›¾ç‰‡æè¿° â†’ ç”Ÿæˆå›¾ç‰‡ â†’ æäº¤å‘å¸ƒ
(å¿…é€‰)     (å¿…é€‰)     (å¯è·³è¿‡)   (å¯è·³è¿‡)   (å¯è·³è¿‡)   (å±•ç¤º)
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- **çƒ­å¸–æŠ“å–**: Tab åˆ‡æ¢æŸ¥çœ‹ X-trends å’Œ TopHub çƒ­æ¦œï¼Œé€‰æ‹©åˆ›ä½œè¯é¢˜
- **ç”Ÿæˆå†…å®¹**: è°ƒç”¨ content-writer ç”Ÿæˆç‰ˆæœ¬ C å†…å®¹ï¼ˆDefou x Stanley èåˆç‰ˆï¼‰
- **ä¼˜åŒ–å†…å®¹**: è°ƒç”¨ viral-verification è¿›è¡Œçˆ†æ¬¾éªŒè¯å’Œä¼˜åŒ–
- **ç”Ÿæˆå›¾ç‰‡**: è°ƒç”¨ prompt-generator ç”Ÿæˆå›¾ç‰‡æè¿°ï¼Œå†è°ƒç”¨ gemini-image-gen ç”Ÿæˆé…å›¾
- **æäº¤å‘å¸ƒ**: æœ€ç»ˆé¢„è§ˆã€å¤åˆ¶å†…å®¹ã€ä¿å­˜åˆ°å†å²è®°å½•

**æŠ€æœ¯å®ç°**ï¼š

| æ¨¡å— | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| æ•°æ®åº“ | `src/config/database.js` | æ–°å¢ post_tasks å’Œ post_history è¡¨ |
| åç«¯ API | `src/routes/tasks.js` | ä»»åŠ¡ CRUDã€æ­¥éª¤æ‰§è¡Œã€å†å²è®°å½• |
| çŠ¶æ€ç®¡ç† | `public/js/generator/state.js` | å…¨å±€çŠ¶æ€ + localStorage æŒä¹…åŒ– |
| è·¯ç”±ç³»ç»Ÿ | `public/js/generator/index.js` | Hash è·¯ç”± + API å°è£… |
| å·¥ä½œæµç»„ä»¶ | `public/js/generator/workflow.js` | åŠ¨æ€è¿›åº¦æ˜¾ç¤º |
| é¡µé¢ç»„ä»¶ | `public/js/generator/pages/*.js` | 6 ä¸ªé¡µé¢ç»„ä»¶ |

**æ•°æ®åº“è¡¨ç»“æ„**ï¼š
```sql
-- ä»»åŠ¡è¡¨
CREATE TABLE post_tasks (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    status VARCHAR(20),        -- pending, in_progress, completed, abandoned
    current_step VARCHAR(30),  -- trends, content, optimize, image, submit
    workflow_config JSONB,
    trends_data JSONB,
    content_data JSONB,
    optimize_data JSONB,
    image_data JSONB,
    final_content TEXT,
    final_image_path VARCHAR(500),
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    completed_at TIMESTAMP
);

-- å†å²è®°å½•è¡¨
CREATE TABLE post_history (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    task_id INTEGER REFERENCES post_tasks(id),
    trend_source VARCHAR(30),
    trend_topic VARCHAR(500),
    final_content TEXT,
    final_image_path VARCHAR(500),
    viral_score INTEGER,
    created_at TIMESTAMP
);
```

**API ç«¯ç‚¹**ï¼š
| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| GET | /api/tasks/current | è·å–å½“å‰è¿›è¡Œä¸­ä»»åŠ¡ |
| POST | /api/tasks | åˆ›å»ºæ–°ä»»åŠ¡ |
| GET | /api/tasks/:id | è·å–ä»»åŠ¡è¯¦æƒ… |
| PUT | /api/tasks/:id | æ›´æ–°ä»»åŠ¡ |
| DELETE | /api/tasks/:id | æ”¾å¼ƒä»»åŠ¡ |
| POST | /api/tasks/:id/execute-step | æ‰§è¡Œæ­¥éª¤ï¼ˆSSEï¼‰ |
| GET | /api/tasks/history | å†å²åˆ—è¡¨ |
| GET | /api/tasks/history/:id | å†å²è¯¦æƒ… |

**æ–°å¢ Skill**ï¼š
- **prompt-generator**: æ ¹æ®å¸–å­å†…å®¹ç”Ÿæˆ AI å›¾åƒæè¿° prompt

**æ–­è¿æ¢å¤**ï¼š
- ä»»åŠ¡çŠ¶æ€è‡ªåŠ¨æŒä¹…åŒ–åˆ° localStorage
- é¡µé¢åˆ·æ–°è‡ªåŠ¨æ¢å¤æœªå®Œæˆä»»åŠ¡
- æœåŠ¡ç«¯éªŒè¯ + æœ¬åœ°ç¼“å­˜åŒé‡ä¿éšœ

**å‰ç«¯è·¯ç”±**ï¼š
```
#/           â†’ é¦–é¡µï¼ˆæµç¨‹å›¾ + æ•°æ®æºé€‰æ‹© + å†å²å…¥å£ï¼‰
#/trends     â†’ çƒ­å¸–æŠ“å–é¡µ
#/content    â†’ ç”Ÿæˆå†…å®¹é¡µ
#/optimize   â†’ ä¼˜åŒ–å†…å®¹é¡µ
#/prompt     â†’ å›¾ç‰‡æè¿°é¡µ
#/image      â†’ ç”Ÿæˆå›¾ç‰‡é¡µ
#/submit     â†’ æäº¤é¡µé¢
#/history    â†’ å†å²åˆ—è¡¨
#/history/:id â†’ å†å²è¯¦æƒ…
```

### 3.8.1 X è¶‹åŠ¿é¡µé¢é‡æ„ (v2.1.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šé‡æ„ X è¶‹åŠ¿ Tab é¡µé¢ï¼Œå°†åŸå§‹æŠ¥å‘Šè§£æä¸ºç»“æ„åŒ–çš„å››ä¸ªåˆ†åŒºå±•ç¤ºã€‚

**é¡µé¢ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”¥ çƒ­ç‚¹æ¦‚è§ˆ                          â”‚
â”‚ å½“å‰çƒ­é—¨è¯é¢˜çš„æ•´ä½“è¶‹åŠ¿åˆ†æ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â­ é«˜æ½œåŠ›è¯é¢˜åˆ†æ                     â”‚
â”‚ æ’å | è¯é¢˜ | æ½œåŠ›è¯„åˆ† | åŸå›          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ è¯é¢˜åˆ†ç±»                          â”‚
â”‚ ä½“è‚²èµ›äº‹ | å¨±ä¹é¢å¥– | åŠ¨æ¼«æ¸¸æˆ | èŠ‚æ—¥  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¡ é€‰é¢˜å»ºè®® ï¼ˆç‚¹å‡»é€‰æ‹©ä¸€ä¸ªè¯é¢˜ï¼‰        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â‘  è¯é¢˜åç§°                      â”‚ â”‚
â”‚ â”‚   é€‰é¢˜è§’åº¦: ...                 â”‚ â”‚
â”‚ â”‚   ä¸ºä»€ä¹ˆæœ‰æ•ˆ: ...               â”‚ â”‚
â”‚ â”‚   åˆ›ä½œæ–¹å‘:                     â”‚ â”‚
â”‚ â”‚   â€¢ å»ºè®®1                       â”‚ â”‚
â”‚ â”‚   â€¢ å»ºè®®2                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŠ€æœ¯å®ç°**ï¼š

| æ–¹æ³• | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| `renderXTrendsContent()` | trends.js | X è¶‹åŠ¿ä¸“ç”¨æ¸²æŸ“ |
| `parseXTrendsReport()` | trends.js | è§£ææŠ¥å‘Šæå–å„åˆ†åŒº |
| `parseTable()` | trends.js | è§£æ Markdown è¡¨æ ¼ |
| `parseCategories()` | trends.js | è§£æè¯é¢˜åˆ†ç±» |
| `renderHighPotentialTable()` | trends.js | æ¸²æŸ“é«˜æ½œåŠ›è¯é¢˜å¡ç‰‡ |
| `renderCategories()` | trends.js | æ¸²æŸ“åˆ†ç±»æ ‡ç­¾ç½‘æ ¼ |

**æ ·å¼æ–°å¢** (generator.css)ï¼š
- `.trends-section` - åˆ†åŒºå®¹å™¨
- `.potential-table` / `.potential-row` - é«˜æ½œåŠ›è¯é¢˜å¡ç‰‡
- `.categories-grid` / `.category-card` / `.category-tag` - è¯é¢˜åˆ†ç±»ç½‘æ ¼
- `.topic-header` / `.topic-number` - é€‰é¢˜å»ºè®®åºå·æ ·å¼
- `.topic-field` / `.field-label` / `.field-value` - å­—æ®µå±•ç¤º
- `.direction-list` / `.direction-item` - åˆ›ä½œæ–¹å‘åˆ—è¡¨

**å…¶ä»–ä¿®å¤**ï¼š
- çƒ­å¸–æŠ“å–æ•°æ®ç¼“å­˜ (1å°æ—¶ TTL)
- é¡µé¢æ»šåŠ¨é—®é¢˜ä¿®å¤ï¼ˆbody overflow å¤„ç†ï¼‰

### 3.8.2 å†…å®¹ç”Ÿæˆé¡µæµç¨‹ä¼˜åŒ– (v2.1.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šä¼˜åŒ–å†…å®¹ç”Ÿæˆé¡µé¢æµç¨‹ï¼Œå…ˆå±•ç¤ºè¾“å…¥ç´ æè®©ç”¨æˆ·ç¼–è¾‘ï¼Œç¡®è®¤åå†ç”Ÿæˆå†…å®¹ã€‚

**æ–°æµç¨‹**ï¼š
```
è¿›å…¥é¡µé¢ â†’ å±•ç¤ºè¾“å…¥ç´ æï¼ˆå¯ç¼–è¾‘ï¼‰ â†’ ç‚¹å‡»"ç”Ÿæˆå†…å®¹" â†’ ç”Ÿæˆå¹¶å±•ç¤ºç»“æœ
```

**é¡µé¢çŠ¶æ€**ï¼š
1. **ç¼–è¾‘çŠ¶æ€** (`isEditing = true`)ï¼š
   - æ˜¾ç¤ºåˆ›ä½œç´ æè¾“å…¥æ¡†
   - è‡ªåŠ¨ä»è¯é¢˜ä¿¡æ¯æ„å»ºé»˜è®¤è¾“å…¥ï¼ˆè¯é¢˜ã€é€‰é¢˜è§’åº¦ã€ä¸ºä»€ä¹ˆæœ‰æ•ˆã€åˆ›ä½œæ–¹å‘ï¼‰
   - ç”¨æˆ·å¯è‡ªç”±ç¼–è¾‘
   - ç‚¹å‡»"ç”Ÿæˆå†…å®¹"æŒ‰é’®è§¦å‘ç”Ÿæˆ

2. **ç»“æœçŠ¶æ€** (`isEditing = false`)ï¼š
   - æ˜¾ç¤ºç”Ÿæˆçš„å†…å®¹ï¼ˆå¯ç¼–è¾‘ï¼‰
   - æ˜¾ç¤ºè¯„åˆ†å¡ç‰‡ï¼ˆå¥½å¥‡å¿ƒã€å…±é¸£åº¦ã€æ¸…æ™°åº¦ã€ä¼ æ’­å€¼ï¼‰
   - æ˜¾ç¤ºä¼˜åŒ–å»ºè®®
   - æä¾›"ä¿®æ”¹è¾“å…¥"å’Œ"é‡æ–°ç”Ÿæˆ"æŒ‰é’®

**æŠ€æœ¯å®ç°**ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `pages/content.js` | æ–°å¢ `isEditing` çŠ¶æ€ã€`inputText` å±æ€§ã€`buildInputText()` æ–¹æ³• |
| `routes/tasks.js` | content æ­¥éª¤æ”¯æŒ `rawInput` å‚æ•° |
| `generator.css` | æ–°å¢ `.input-section`ã€`.input-textarea`ã€`.btn-large` ç­‰æ ·å¼ |

**è¾“å…¥æ–‡æœ¬æ ¼å¼**ï¼š
```
ã€è¯é¢˜ã€‘#GoldenGlobes

ã€é€‰é¢˜è§’åº¦ã€‘ã€Œé‡‘çƒå¥–æœ€å¤§å†·é—¨ï¼è¿™äº›è½é€‰è€…æ‰æ˜¯çœŸæ­£çš„é—ç ã€

ã€ä¸ºä»€ä¹ˆæœ‰æ•ˆã€‘é¢å¥–å…¸ç¤¼å¤©ç„¶å¸¦æœ‰"äº‰è®®æ€§"ï¼Œè½é€‰è€…è¯é¢˜æ¯”è·å¥–è€…æ›´å®¹æ˜“å¼•å‘è®¨è®º

ã€åˆ›ä½œæ–¹å‘ã€‘
- ç›˜ç‚¹è·å¥–åå•ä¸­çš„æ„å¤–ç»“æœ
- åˆ†æ"åº”è¯¥è·å¥–å´è½é€‰"çš„ä½œå“/æ¼”å‘˜
- åŠ å…¥æŠ•ç¥¨äº’åŠ¨ï¼šä½ è®¤ä¸ºæœ€å¤§é—ç æ˜¯è°ï¼Ÿ
```

### 3.8.3 ä¼˜åŒ–å†…å®¹é¡µç¾åŒ–å±•ç¤º (v2.1.0)

**åŠŸèƒ½æ¦‚è¿°**ï¼šä¼˜åŒ–å†…å®¹é¡µé¢çš„çˆ†æ¬¾éªŒè¯æŠ¥å‘Šå±•ç¤ºï¼Œå°†åŸå§‹ Markdown è§£æä¸ºç»“æ„åŒ–çš„å¯è§†åŒ–ç»„ä»¶ã€‚

**é¡µé¢ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”  78/100                     â”‚
â”‚  â”‚    â”‚  ğŸ”¥ çˆ†æ¬¾æ½œåŠ›æé«˜             â”‚
â”‚  â””â”€â”€â”€â”€â”˜  çˆ†æ¬¾æ½œåŠ›è¯„åˆ†                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š å…­ç»´è¯„åˆ†                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚ â”‚å¥½å¥‡å¿ƒç¼ºå£â”‚ â”‚æƒ…ç»ªå…±é¸£  â”‚             â”‚
â”‚ â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8â”‚ â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 9â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” æ·±åº¦åˆ†æ                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚ â”‚âœ… ä¼˜ç‚¹   â”‚ â”‚âŒ å¾…æ”¹è¿› â”‚             â”‚
â”‚ â”‚â€¢ æ•°æ®å¼€åœºâ”‚ â”‚â€¢ å¼€å¤´é’©å­â”‚             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¡ ä¼˜åŒ–ç­–ç•¥                          â”‚
â”‚ â‘  æ ‡é¢˜ä¿®æ­£ï¼šå¢åŠ åå·®æ„Ÿ               â”‚
â”‚ â‘¡ å¼€å¤´é’©å­ï¼šåˆ¶é€ è®¤çŸ¥é¢ è¦†             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš€ æœ€ç»ˆä¼˜åŒ–ç‰ˆæœ¬                      â”‚
â”‚ [å¯ç¼–è¾‘çš„æ–‡æœ¬æ¡†]                     â”‚
â”‚ ğŸ“ ä¼˜åŒ–è¯´æ˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§£æçš„æŠ¥å‘Šéƒ¨åˆ†**ï¼š
| éƒ¨åˆ† | è¯´æ˜ |
|------|------|
| æ€»åˆ†å¡ç‰‡ | åœ†å½¢åˆ†æ•°æ˜¾ç¤º + è¯„çº§æ ‡ç­¾ï¼ˆé«˜/ä¸­/ä½ï¼‰ |
| å…­ç»´è¯„åˆ† | è¿›åº¦æ¡ + åˆ†æ•° + è¯„ä»· |
| æ·±åº¦åˆ†æ | ä¼˜ç‚¹/å¾…æ”¹è¿›åŒæ å¡ç‰‡ |
| ä¼˜åŒ–ç­–ç•¥ | ç¼–å·åˆ—è¡¨ |
| ä¼˜åŒ–ç‰ˆæœ¬ | å¯ç¼–è¾‘æ–‡æœ¬æ¡† |
| ä¼˜åŒ–è¯´æ˜ | é«˜äº®æç¤ºæ¡† |

**æŠ€æœ¯å®ç°**ï¼š

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `parseReport()` | è§£æå…­ç»´è¯„åˆ†è¡¨æ ¼ã€ä¼˜ç‚¹ã€ä¸è¶³ã€ç­–ç•¥ã€ä¼˜åŒ–è¯´æ˜ |
| `renderTotalScore()` | æ¸²æŸ“æ€»åˆ†åœ†å½¢å¡ç‰‡ |
| `renderScoreCard()` | æ¸²æŸ“å…­ç»´è¯„åˆ†ç½‘æ ¼ |
| `renderAnalysis()` | æ¸²æŸ“æ·±åº¦åˆ†æåŒæ  |
| `renderStrategies()` | æ¸²æŸ“ä¼˜åŒ–ç­–ç•¥åˆ—è¡¨ |
| `renderOptimizationNotes()` | æ¸²æŸ“ä¼˜åŒ–è¯´æ˜æç¤ºæ¡† |

**æ ·å¼æ–°å¢** (generator.css)ï¼š
- `.total-score-card` - æ€»åˆ†å¡ç‰‡ï¼ˆå¸¦è¯„çº§é¢œè‰²ï¼‰
- `.score-grid` / `.score-item-card` - å…­ç»´è¯„åˆ†ç½‘æ ¼
- `.score-item-bar` / `.score-item-fill` - è¯„åˆ†è¿›åº¦æ¡
- `.analysis-grid` / `.analysis-card` - æ·±åº¦åˆ†æå¡ç‰‡
- `.strategies-list` / `.strategy-item` - ä¼˜åŒ–ç­–ç•¥åˆ—è¡¨
- `.optimization-notes` - ä¼˜åŒ–è¯´æ˜æç¤ºæ¡†
- `.version-compare-section` - ç‰ˆæœ¬å¯¹æ¯”åŒºåŸŸ
- `.version-tabs` / `.version-tab` - ç‰ˆæœ¬åˆ‡æ¢ Tab
- `.version-pane` / `.original-content` - ç‰ˆæœ¬å†…å®¹é¢æ¿

**ç‰ˆæœ¬å¯¹æ¯” Tab**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸš€ ä¼˜åŒ–åç‰ˆæœ¬] [ğŸ“ ä¼˜åŒ–å‰ç‰ˆæœ¬]      â”‚ â† Tab åˆ‡æ¢
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼˜åŒ–åç‰ˆæœ¬ï¼ˆå¯ç¼–è¾‘ï¼‰                 â”‚
â”‚ [æ–‡æœ¬æ¡†]                            â”‚
â”‚ ğŸ“ ä¼˜åŒ–è¯´æ˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¿®å¤å†…å®¹**ï¼š
- ä¿®å¤å…­ç»´è¯„åˆ†è¡¨æ ¼è§£æï¼ˆæ­£ç¡®è¿‡æ»¤è¡¨å¤´å’Œåˆ†éš”è¡Œï¼‰
- ä¿®å¤æ€»åˆ†æå–æ­£åˆ™ï¼ˆæ”¯æŒ `**ğŸ”¥ æ€»ä½“çˆ†æ¬¾æ½œåŠ›è¯„åˆ†**: 78/100` æ ¼å¼ï¼Œå¤„ç† emoji å’Œ markdown åŠ ç²—ï¼‰
- ä¿®å¤ä¼˜åŒ–ç‰ˆæœ¬æå–ï¼ˆä»æ ‡é¢˜åˆ°ä¼˜åŒ–è¯´æ˜ä¹‹é—´çš„å†…å®¹ï¼‰
- ä¿®å¤ä¼˜åŒ–è¯´æ˜æå–ï¼ˆæ”¯æŒ "ä¼˜åŒ–è¯´æ˜" å’Œ "ä¼˜åŒ–è¦ç‚¹è¯´æ˜" ä¸¤ç§è¡¨è¿°ï¼‰
- æ·»åŠ å¤‡ç”¨æ­£åˆ™åŒ¹é…ï¼Œå¢å¼ºè§£æé²æ£’æ€§

### 3.8.4 ä¸­é—´æ•°æ®è‡ªåŠ¨ä¿å­˜ (v2.1.1)

**åŠŸèƒ½æ¦‚è¿°**ï¼šåœ¨å„æ­¥éª¤ç”Ÿæˆå®Œæˆåè‡ªåŠ¨ä¿å­˜æ•°æ®åˆ°æ•°æ®åº“ï¼Œç¡®ä¿åˆ·æ–°é¡µé¢åä¸ä¸¢å¤±è¿›åº¦ã€‚

**ä¿å­˜æ—¶æœº**ï¼š

| æ­¥éª¤ | è§¦å‘æ—¶æœº | ä¿å­˜æ•°æ® |
|------|----------|----------|
| ä¼˜åŒ–å†…å®¹ | çˆ†æ¬¾éªŒè¯å®Œæˆå | optimizedVersion, viralScore, rawReport |
| ç”Ÿæˆå›¾ç‰‡ | Prompt ç”Ÿæˆå | prompt, ratio |
| ç”Ÿæˆå›¾ç‰‡ | å›¾ç‰‡ç”Ÿæˆå | prompt, ratio, imagePath |

**åç«¯æ–°å¢ API action**ï¼š
- `updateOptimizeData` - æ›´æ–°ä¼˜åŒ–æ•°æ®ï¼ˆä¸æ”¹å˜æ­¥éª¤ï¼‰
- `updateImageData` - æ›´æ–°å›¾ç‰‡æ•°æ®ï¼ˆä¸æ”¹å˜æ­¥éª¤ï¼‰

**å‰ç«¯æ–°å¢æ–¹æ³•**ï¼š
- `optimize.js` â†’ `autoSaveOptimize()` - éªŒè¯å®Œæˆåè‡ªåŠ¨ä¿å­˜
- `image.js` â†’ `autoSaveImageData()` - Prompt/å›¾ç‰‡ç”Ÿæˆåè‡ªåŠ¨ä¿å­˜

**æ•ˆæœ**ï¼š
- ä¼˜åŒ–å†…å®¹ç”Ÿæˆåï¼Œåˆ·æ–°é¡µé¢å¯ä»¥çœ‹åˆ°ä¼˜åŒ–ç»“æœ
- å›¾ç‰‡ Prompt ç”Ÿæˆåï¼Œåˆ·æ–°é¡µé¢å¯ä»¥çœ‹åˆ° Prompt
- å›¾ç‰‡ç”Ÿæˆåï¼Œåˆ·æ–°é¡µé¢å¯ä»¥çœ‹åˆ°å›¾ç‰‡

### 3.8.5 Skill æ‰§è¡Œæ—¥å¿—å¢å¼º (v2.1.1)

**åŠŸèƒ½æ¦‚è¿°**ï¼šåœ¨ Skill æ‰§è¡Œè¿‡ç¨‹ä¸­æ·»åŠ è¯¦ç»†çš„æ§åˆ¶å°æ—¥å¿—å’Œå‰ç«¯è¿›åº¦æ˜¾ç¤ºã€‚

**åç«¯æ—¥å¿—** (`src/routes/skills.js`)ï¼š
- Skill å¼€å§‹æ‰§è¡Œæ—¶è¾“å‡ºè„šæœ¬è·¯å¾„å’Œè¾“å…¥é¢„è§ˆ
- å­è¿›ç¨‹ stdout/stderr å®æ—¶è¾“å‡º
- è¿›ç¨‹é€€å‡ºæ—¶è¾“å‡ºé€€å‡ºç 

**å‰ç«¯æ—¥å¿—** (`public/js/generator/pages/image.js`)ï¼š
- Prompt ç”Ÿæˆè¿‡ç¨‹æ˜¾ç¤ºæ—¥å¿—åŒºåŸŸ
- æµè§ˆå™¨æ§åˆ¶å°è¾“å‡º `[prompt]` å’Œ `[image]` å‰ç¼€æ—¥å¿—

**Skill è„šæœ¬è¿›åº¦** (`.claude/*/`)ï¼š
- prompt-generator.ts - è¯¦ç»†çš„ä¸­æ–‡è¿›åº¦æç¤º
- gemini-image-gen.ts - Python è„šæœ¬å†…çš„è¯¦ç»†è¿›åº¦è¾“å‡º

### 3.8.6 Skill è¾“å‡ºæ ¼å¼ç»Ÿä¸€ä¸º JSON (v2.1.2)

**åŠŸèƒ½æ¦‚è¿°**ï¼šå°†æ‰€æœ‰ Skill è¾“å‡ºæ ¼å¼ä» Markdown ç»Ÿä¸€æ”¹ä¸º JSONï¼Œæé«˜è§£æç¨³å®šæ€§å’Œæ•°æ®ä¸€è‡´æ€§ã€‚

**ä¿®æ”¹çš„ Skill**ï¼š

| Skill | JSON Schema |
|-------|-------------|
| content-writer | `{ analysis, versionA, versionB, versionC, evaluation, suggestions }` |
| viral-verification | `{ scoreCard, totalScore, analysis, strategies, optimizedVersion }` |
| prompt-generator | `{ prompt, style, mood, elements, colorTone }` |
| x-trends | `{ overview, highPotentialTopics, categories, suggestions, summary }` |
| tophub-trends | `{ overview, highPotentialTopics, categories, suggestions, summary }` |

**content-writer JSON ç»“æ„**ï¼š
```json
{
  "analysis": { "topic": "", "audience": "", "tone": "" },
  "versionA": { "title": "", "content": "" },
  "versionB": { "title": "", "content": "" },
  "versionC": { "title": "", "content": "" },
  "evaluation": {
    "curiosity": { "score": 0-25, "comment": "" },
    "resonance": { "score": 0-25, "comment": "" },
    "clarity": { "score": 0-25, "comment": "" },
    "shareability": { "score": 0-25, "comment": "" },
    "total": 0-100,
    "summary": ""
  },
  "suggestions": ["å»ºè®®1", "å»ºè®®2"]
}
```

**viral-verification JSON ç»“æ„**ï¼š
```json
{
  "scoreCard": [
    { "factor": "å¥½å¥‡å¿ƒç¼ºå£", "score": 0-10, "comment": "" },
    { "factor": "æƒ…ç»ªå…±é¸£", "score": 0-10, "comment": "" },
    ...
  ],
  "totalScore": 0-100,
  "analysis": { "strengths": [], "weaknesses": [] },
  "strategies": { "titleFix": "", "hookFix": "", "structureFix": "", "toneFix": "" },
  "optimizedVersion": ""
}
```

**prompt-generator JSON ç»“æ„**ï¼š
```json
{
  "prompt": "å›¾åƒç”Ÿæˆæè¿°ï¼ˆ1-3å¥è¯ä¸­æ–‡ï¼‰",
  "style": "é£æ ¼å»ºè®®",
  "mood": "æ°›å›´æè¿°",
  "elements": ["è§†è§‰å…ƒç´ 1", "è§†è§‰å…ƒç´ 2"],
  "colorTone": "è‰²è°ƒå»ºè®®"
}
```

**x-trends / tophub-trends JSON ç»“æ„**ï¼š
```json
{
  "overview": "çƒ­ç‚¹æ¦‚è§ˆï¼Œç®€è¦æ€»ç»“å½“å‰çƒ­é—¨è¯é¢˜çš„æ•´ä½“è¶‹åŠ¿",
  "highPotentialTopics": [
    { "rank": 1, "topic": "è¯é¢˜åç§°", "source": "æ¥æº(tophub)", "score": "æ½œåŠ›è¯„åˆ†", "reason": "åŸå› è¯´æ˜" }
  ],
  "categories": { "åˆ†ç±»åç§°": ["è¯é¢˜1", "è¯é¢˜2"] },
  "suggestions": [
    { "topic": "åŸå§‹è¯é¢˜", "angle": "é€‰é¢˜è§’åº¦/æ ‡é¢˜å»ºè®®", "whyEffective": "ä¸ºä»€ä¹ˆæœ‰æ•ˆ", "direction": "åˆ›ä½œæ–¹å‘" }
  ],
  "summary": "æ€»ç»“ä¸å»ºè®®ï¼Œæ•´ä½“å†…å®¹ç­–ç•¥å»ºè®®"
}
```

**å‰ç«¯è§£ææ›´æ–°**ï¼š
- `content.js` â†’ `parseReport()` - ä¼˜å…ˆè§£æ JSONï¼Œå¤±è´¥å›é€€ Markdown
- `optimize.js` â†’ `parseReport()` - ä¼˜å…ˆè§£æ JSONï¼Œå¤±è´¥å›é€€ Markdown
- `image.js` â†’ report handler - ä» JSON æå– prompt å­—æ®µ
- `trends.js` â†’ `tryParseJSON()` + `parseTopicsFromJSON()` - JSON è§£æï¼Œå¤±è´¥å›é€€ Markdown

**åç«¯æ›´æ–°**ï¼š
- `tasks.js` - ä¼˜å…ˆæŸ¥æ‰¾ `.json` æ–‡ä»¶ï¼Œå…¶æ¬¡æŸ¥æ‰¾ `.md` æ–‡ä»¶

**å…¼å®¹æ€§**ï¼š
- æ‰€æœ‰ Skill åŒæ—¶è¾“å‡º `.json` å’Œ `.md` æ–‡ä»¶
- å‰ç«¯è§£æå™¨æ”¯æŒ JSON å’Œ Markdown åŒæ ¼å¼
- æ—§çš„ç¼“å­˜æ–‡ä»¶ä»å¯æ­£å¸¸ä½¿ç”¨

### 3.9 Gemini AI ç»˜å›¾ Skill (v1.7.3)

**åŠŸèƒ½æ¦‚è¿°**ï¼šä½¿ç”¨ Google Gemini API æ ¹æ®æ–‡å­—æè¿°ç”Ÿæˆå›¾ç‰‡ã€‚

**ç¯å¢ƒè¦æ±‚**ï¼š
- `.env` ä¸­é…ç½® `GEMINI_API_KEY`
- Python å®‰è£… `google-genai` åŒ…ï¼š`pip install google-genai`

**æ”¯æŒçš„å›¾ç‰‡æ¯”ä¾‹**ï¼š
- 1:1 (æ­£æ–¹å½¢ï¼Œé»˜è®¤)
- 16:9 (æ¨ªå±ï¼Œé€‚åˆå°é¢)
- 9:16 (ç«–å±ï¼Œé€‚åˆæ‰‹æœº)
- 4:3 / 3:4

**ä½¿ç”¨æ–¹å¼**ï¼š
1. ç‚¹å‡»å·¥å…·æ ã€ŒAIç»˜å›¾ã€æŒ‰é’® (G å›¾æ ‡)
2. è¾“å…¥å›¾ç‰‡æè¿°ï¼Œå¯åœ¨æœ«å°¾æ·»åŠ  `[ratio:16:9]` æŒ‡å®šæ¯”ä¾‹
3. ç‚¹å‡»ã€Œç”Ÿæˆå›¾ç‰‡ã€æˆ– Ctrl+Enter

**è¾“å‡ºç›®å½•**ï¼š`outputs/images/`
- å›¾ç‰‡æ–‡ä»¶ï¼š`gemini_[timestamp].png`
- æŠ¥å‘Šæ–‡ä»¶ï¼š`report_[timestamp].md`

**æ–‡ä»¶ç»“æ„**ï¼š
```
.claude/gemini-image-gen/
â”œâ”€â”€ SKILL.md              # Skill è¯´æ˜æ–‡æ¡£
â””â”€â”€ gemini-image-gen.ts   # æ‰§è¡Œè„šæœ¬
```

### 3.10 Claude CLI è°ƒç”¨ä¼˜åŒ– (v1.6.1)

**é—®é¢˜ä¿®å¤**ï¼šè§£å†³ Claude CLI è°ƒç”¨æ—¶å› å‘½ä»¤è¡Œé•¿åº¦é™åˆ¶å¯¼è‡´çš„æ‰§è¡Œå¤±è´¥é—®é¢˜ã€‚

**ä¿®æ”¹å†…å®¹**ï¼š
- å°† Claude CLI è°ƒç”¨æ–¹å¼ä»å‘½ä»¤æ›¿æ¢ (`$(cat file)`) æ”¹ä¸º stdin ç®¡é“ä¼ è¾“
- ç§»é™¤ shell: true é€‰é¡¹ï¼Œç›´æ¥è°ƒç”¨ claude å‘½ä»¤
- é¿å…å‘½ä»¤è¡Œå‚æ•°è¿‡é•¿å¯¼è‡´çš„è¿›ç¨‹æŒ‚èµ·

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `.claude/x-trends/x-trends.ts` - `callClaudeCLI()` å‡½æ•°
- `.claude/tophub-trends/tophub.ts` - `callClaudeCLI()` å‡½æ•°

**æŠ€æœ¯ç»†èŠ‚**ï¼š
```typescript
// æ—§æ–¹å¼ (æœ‰é—®é¢˜)
spawn('claude', ['-p', `$(cat "${tmpFile}")`], { shell: true })

// æ–°æ–¹å¼ (stdin ä¼ è¾“)
const child = spawn('claude', ['--output-format', 'text'], {
  stdio: ['pipe', 'pipe', 'pipe']
});
child.stdin.write(prompt);
child.stdin.end();
```

### 3.11 Skill æŠ¥å‘Šè¯»å–ä¿®å¤ (v1.7.1)

**é—®é¢˜**ï¼šæ‰§è¡Œ content-writer ç­‰ Skill åï¼Œå‰ç«¯æ˜¾ç¤º"åˆ†æå®Œæˆï¼Œä½†æœªç”ŸæˆæŠ¥å‘Šå†…å®¹"ï¼Œå°½ç®¡æŠ¥å‘Šæ–‡ä»¶å·²æ­£ç¡®ç”Ÿæˆã€‚

**åŸå› **ï¼šå½“æŠ¥å‘Šæ–‡ä»¶æœªæ‰¾åˆ°æˆ–è¯»å–å¤±è´¥æ—¶ï¼ŒæœåŠ¡ç«¯æ²¡æœ‰å‘å®¢æˆ·ç«¯å‘é€æ˜ç¡®çš„é”™è¯¯æ¶ˆæ¯ï¼Œå¯¼è‡´å‰ç«¯æ— æ³•åˆ¤æ–­å…·ä½“é”™è¯¯åŸå› ã€‚

**ä¿®å¤å†…å®¹**ï¼š
- æ·»åŠ è¯¦ç»†çš„æœåŠ¡ç«¯æ—¥å¿—ï¼Œè®°å½•æ–‡ä»¶æŸ¥æ‰¾å’Œè¯»å–è¿‡ç¨‹
- å½“æœªæ‰¾åˆ°æŠ¥å‘Šæ–‡ä»¶æ—¶ï¼Œå‘é€æ˜ç¡®çš„é”™è¯¯æ¶ˆæ¯ç»™å‰ç«¯
- å½“è¯»å–æŠ¥å‘Šå¤±è´¥æ—¶ï¼Œå‘é€æ˜ç¡®çš„é”™è¯¯æ¶ˆæ¯ç»™å‰ç«¯

**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/routes/skills.js`

**æ—¥å¿—ç¤ºä¾‹**ï¼š
```
[content-writer] åœ¨ /outputs/content ä¸­æŸ¥æ‰¾ content_*.md æ–‡ä»¶
[content-writer] æ‰¾åˆ° 8 ä¸ªæ–‡ä»¶: ['content_2026...', ...]
[content-writer] è¯»å–æŠ¥å‘ŠæˆåŠŸï¼Œé•¿åº¦: 2441 å­—ç¬¦
```

### 4. æ ¸å¿ƒåŠŸèƒ½
- ç”¨æˆ·æ³¨å†Œ/ç™»å½•ï¼ˆJWT è®¤è¯ï¼‰
- å¤šä¼šè¯ç®¡ç†
- å®æ—¶æµå¼è¾“å‡º
- ä¼šè¯ä¸Šä¸‹æ–‡ä¿æŒï¼ˆé€šè¿‡ Claude CLI --resumeï¼‰
- å¯¹è¯å†å²æŒä¹…åŒ–

### 5. æ–‡æ¡£ç¼–å†™
- `docs/å¯åŠ¨è¯´æ˜.md` - Claude Code CLI å®‰è£…é…ç½®åŠé¡¹ç›®éƒ¨ç½²æŒ‡å—

### 6. è‡ªåŠ¨åŒ–æµè§ˆå™¨æµ‹è¯•
ä½¿ç”¨ Chrome DevTools Protocol è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ŒéªŒè¯ç»“æœï¼š

| æµ‹è¯•é¡¹ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| é¡µé¢åŠ è½½ | âœ… é€šè¿‡ | ç™»å½•é¡µé¢æ­£ç¡®æ˜¾ç¤º |
| ç”¨æˆ·æ³¨å†Œ | âœ… é€šè¿‡ | æˆåŠŸåˆ›å»ºç”¨æˆ·å¹¶è·³è½¬åˆ°èŠå¤©é¡µé¢ |
| ç”¨æˆ·ç™»å½• | âœ… é€šè¿‡ | åˆ·æ–°é¡µé¢åä¿æŒç™»å½•çŠ¶æ€ |
| ä¼šè¯åˆ›å»º | âœ… é€šè¿‡ | æ–°å¯¹è¯æ­£ç¡®åˆ›å»ºå¹¶æ˜¾ç¤ºåœ¨ä¾§è¾¹æ  |
| æ¶ˆæ¯å‘é€ | âœ… é€šè¿‡ | ç”¨æˆ·æ¶ˆæ¯æ­£ç¡®æ˜¾ç¤º |
| æµå¼è¾“å‡º | âœ… é€šè¿‡ | æ˜¾ç¤ºåŠ è½½åŠ¨ç”»ç­‰å¾…å“åº” |
| ä¼šè¯ç®¡ç† | âœ… é€šè¿‡ | å¤šä¼šè¯åˆ‡æ¢ã€å†å²æ¶ˆæ¯åŠ è½½ |

**æ³¨æ„**: Claude CLI å“åº”é€Ÿåº¦å–å†³äº API å¹¶å‘é™åˆ¶å’Œç½‘ç»œçŠ¶å†µ

## ç›®å½•ç»“æ„

```
web-cc/
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ x-trends/
â”‚   â”‚   â”œâ”€â”€ SKILL.md
â”‚   â”‚   â””â”€â”€ x-trends.ts
â”‚   â”œâ”€â”€ tophub-trends/
â”‚   â”‚   â”œâ”€â”€ SKILL.md
â”‚   â”‚   â””â”€â”€ tophub.ts
â”‚   â”œâ”€â”€ content-writer/
â”‚   â”‚   â”œâ”€â”€ SKILL.md
â”‚   â”‚   â””â”€â”€ content-writer.ts
â”‚   â”œâ”€â”€ viral-verification/
â”‚   â”‚   â”œâ”€â”€ SKILL.md
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ viral-verification.ts
â”‚   â”œâ”€â”€ gemini-image-gen/
â”‚   â”‚   â”œâ”€â”€ SKILL.md
â”‚   â”‚   â””â”€â”€ gemini-image-gen.ts
â”‚   â””â”€â”€ prompt-generator/
â”‚       â”œâ”€â”€ SKILL.md
â”‚       â””â”€â”€ prompt-generator.ts
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ éœ€æ±‚.md
â”‚   â”œâ”€â”€ éœ€æ±‚v2.0.md
â”‚   â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ.md
â”‚   â”œâ”€â”€ å¯åŠ¨è¯´æ˜.md
â”‚   â””â”€â”€ summary.md
â”œâ”€â”€ outputs/
â”‚   â”œâ”€â”€ trends/           # è¶‹åŠ¿åˆ†æè¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ content/          # å†…å®¹åˆ›ä½œè¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ viral-verified/   # çˆ†æ¬¾éªŒè¯è¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ images/           # AI ç»˜å›¾è¾“å‡ºç›®å½•
â”‚   â””â”€â”€ prompts/          # å›¾ç‰‡æè¿° prompt è¾“å‡ºç›®å½•
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.js
â”‚   â”œâ”€â”€ config/database.js
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ sessions.js
â”‚   â”‚   â”œâ”€â”€ skills.js     # Skill API
â”‚   â”‚   â””â”€â”€ tasks.js      # ä»»åŠ¡ç®¡ç† API
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ claude.js
â”‚   â”‚   â””â”€â”€ skillCache.js # Skill ç¼“å­˜æœåŠ¡
â”‚   â”œâ”€â”€ middleware/auth.js
â”‚   â””â”€â”€ websocket/handler.js
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ style.css
â”‚   â”‚   â””â”€â”€ generator.css # ç”Ÿæˆå™¨ä¸“ç”¨æ ·å¼
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ app.js
â”‚       â””â”€â”€ generator/    # å¸–å­ç”Ÿæˆå™¨æ¨¡å—
â”‚           â”œâ”€â”€ index.js      # å…¥å£ + è·¯ç”±
â”‚           â”œâ”€â”€ state.js      # çŠ¶æ€ç®¡ç†
â”‚           â”œâ”€â”€ workflow.js   # å·¥ä½œæµç»„ä»¶
â”‚           â””â”€â”€ pages/        # é¡µé¢ç»„ä»¶
â”‚               â”œâ”€â”€ home.js
â”‚               â”œâ”€â”€ trends.js
â”‚               â”œâ”€â”€ content.js
â”‚               â”œâ”€â”€ optimize.js
â”‚               â”œâ”€â”€ prompt.js    # å›¾ç‰‡æè¿°é¡µ
â”‚               â”œâ”€â”€ image.js
â”‚               â”œâ”€â”€ submit.js
â”‚               â””â”€â”€ history.js
â”œâ”€â”€ package.json
â”œâ”€â”€ .env
â””â”€â”€ .gitignore
```

## å¯åŠ¨æ–¹å¼

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡å™¨
npm start

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev
```

è®¿é—® http://localhost:3000

## ä¾èµ–æ¡ä»¶
- Node.js >= 18
- Claude CLI å·²å®‰è£…å¹¶é…ç½®
- Neon æ•°æ®åº“å·²é…ç½®
